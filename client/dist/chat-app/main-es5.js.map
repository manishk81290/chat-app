{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/chat-menu/chat-menu.component.ts","webpack:///src/app/components/chat-menu/chat-menu.component.html","webpack:///src/app/components/chat-menu/user-list-item/user-list-item.component.ts","webpack:///src/app/components/chat-menu/user-list-item/user-list-item.component.html","webpack:///src/app/components/chat-menu/user-list/user-list.component.ts","webpack:///src/app/components/chat-menu/user-list/user-list.component.html","webpack:///src/app/components/chat-window/chat-window.component.ts","webpack:///src/app/components/chat-window/chat-window.component.html","webpack:///src/app/components/chat-window/message-list/message-list.component.ts","webpack:///src/app/components/chat-window/message-list/message-list.component.html","webpack:///src/app/components/chat-window/message-list/message/message.component.ts","webpack:///src/app/components/chat-window/message-list/message/message.component.html","webpack:///src/app/components/dashboard/dashboard.component.ts","webpack:///src/app/components/dashboard/dashboard.component.html","webpack:///src/app/components/incoming-call/incoming-call.component.ts","webpack:///src/app/components/incoming-call/incoming-call.component.html","webpack:///src/app/components/loader/loader.component.ts","webpack:///src/app/components/loader/loader.component.html","webpack:///src/app/components/login/login.component.ts","webpack:///src/app/components/login/login.component.html","webpack:///src/app/components/max-video-call/max-video-call.component.ts","webpack:///src/app/components/max-video-call/max-video-call.component.html","webpack:///src/app/components/min-call-window/min-call-window.component.ts","webpack:///src/app/components/min-call-window/min-call-window.component.html","webpack:///src/app/components/models/add-friend-model/add-friend-model.component.ts","webpack:///src/app/components/models/add-friend-model/add-friend-model.component.html","webpack:///src/app/components/models/call-model/call-model.component.ts","webpack:///src/app/components/models/call-model/call-model.component.html","webpack:///src/app/components/models/disconnected-model/disconnected-model.component.ts","webpack:///src/app/components/models/disconnected-model/disconnected-model.component.html","webpack:///src/app/components/models/edit-profile-model/edit-profile-model.component.ts","webpack:///src/app/components/models/edit-profile-model/edit-profile-model.component.html","webpack:///src/app/components/models/new-group-model/new-group-model.component.ts","webpack:///src/app/components/models/new-group-model/new-group-model.component.html","webpack:///src/app/components/models/settings-model/settings-model.component.ts","webpack:///src/app/components/models/settings-model/settings-model.component.html","webpack:///src/app/components/profile-panel/profile-panel.component.ts","webpack:///src/app/components/profile-panel/profile-panel.component.html","webpack:///src/app/components/register/register.component.ts","webpack:///src/app/components/register/register.component.html","webpack:///src/app/components/right-panel/right-panel.component.ts","webpack:///src/app/components/right-panel/right-panel.component.html","webpack:///src/app/components/side-menu/side-menu.component.ts","webpack:///src/app/components/side-menu/side-menu.component.html","webpack:///src/app/components/user-info/user-info.component.ts","webpack:///src/app/components/user-info/user-info.component.html","webpack:///src/app/components/user-profile-image/user-profile-image.component.ts","webpack:///src/app/components/user-profile-image/user-profile-image.component.html","webpack:///src/app/guards/auth.guard.ts","webpack:///src/app/helper/PeerConnection.ts","webpack:///src/app/models/call.ts","webpack:///src/app/models/message.ts","webpack:///src/app/models/signal.ts","webpack:///src/app/models/stream.ts","webpack:///src/app/pipes/filter.pipe.ts","webpack:///src/app/pipes/message.pipe.ts","webpack:///src/app/pipes/time-ago.pipe.ts","webpack:///src/app/services/api.service.ts","webpack:///src/app/services/auth.service.ts","webpack:///src/app/services/call.service.ts","webpack:///src/app/services/chat.service.ts","webpack:///src/app/services/notification.service.ts","webpack:///src/app/services/socket.service.ts","webpack:///src/app/services/user.service.ts","webpack:///src/environments/environment.prod.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts","webpack:///ws (ignored)"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","redirectTo","pathMatch","component","canActivate","AppRoutingModule","forRoot","imports","AppComponent","title","selector","templateUrl","styleUrls","config","url","SERVER_URL","options","AppModule","declarations","providers","bootstrap","ChatMenuComponent","userService","chatService","query","index","activeUsers","subscribe","data","length","users","updateActiveUser","opened","setActiveUser","UserListItemComponent","user","lastMessage","messageType","Image","Video","File","message","split","slice","pop","viewProfile","userId","UserListComponent","updateUser","emit","ChatWindowComponent","callService","cdr","showEmojiPicker","ongoingCall","messageText","chatMessages","activeUserSubject","activeUser","resetHeight","activeMessages","messages","window","searchSubject","q","getUser","console","log","makeCall","event","emoji","focus","call","file","size","type","isValidUrl","Url","Text","sendMessage","fileCount","picked","setTimeout","$","outerHeight","height","screen","content","name","push","from","to","timeStamp","Date","uploadFile","underlyingFile","res","filePicker","reset","error","onReadStart","onFilePicked","onReadEnd","toggleEmojiPicker","MessageListComponent","MessageComponent","hideinfo","valueOf","toString","relativeTimeStamp","getTimeStamp","production","indexOf","getUrlMetadata","success","metadata","fileName","DashboardComponent","show","hide","IncomingCallComponent","incomingCall","callingUser","getUserByUserId","rejectCall","acceptCall","LoaderComponent","displayLoader","LoginComponent","router","formBuilder","authService","submitted","waitingResponse","logOut","document","getElementsByTagName","classList","add","loginForm","group","email","required","password","minLength","invalid","authenticate","value","navigate","remove","controls","signIn","MaxVideoCallComponent","videoDisabled","screenDisabled","streams","audioDisabled","maxWindow","remoteStreamSubject","stream","remoteStream","detectChanges","localStreamSubject","localStream","streamSubject","s","maximizeWindow","flag","toggleWindow","connectedUserId","enableVideo","disableVideo","enableScreen","disableScreen","toggleMute","disconnect","MinCallWindowComponent","AddFriendModelComponent","CallModelComponent","DisconnectedModelComponent","EditProfileModelComponent","button_text","userSubject","d","profileImagePath","profileForm","firstName","lastName","mobile","website","city","state","country","bio","facebookProfileUrl","linkedInProfileUrl","twitterProfileUrl","googlePlusProfileUrl","instagramProfileUrl","dribbleProfileUrl","reader","FileReader","onload","target","result","imageSelected","files","readAsDataURL","tab","updateUserProfile","selectImage","submit","NewGroupModelComponent","_toppy","filteredUsers","selectedUsers","form","groupName","description","position","placement","BOTTOM_LEFT","src","el","nativeElement","overlay","tpl","create","fetchAllUsers","filter","u","toUpperCase","includes","some","map","createGroup","v","tooltip","inputChange","open","splice","findIndex","i","close","SettingsModelComponent","ProfilePanelComponent","queryChange","forEach","msg","updateSearchQuery","getElementById","scrollIntoView","RegisterComponent","registerForm","register","RightPanelComponent","SideMenuComponent","rightSwipe","addEventListener","browser","UserInfoComponent","openProfile","UserProfileImageComponent","AuthGuard","route","isLoggedIn","providedIn","PeerConnection","track","sender","processPeerStream","initialize","createPeerConnection","processSignal","signal","PeerConnectionSignalType","Offer","processOffer","Answer","processAnswer","Candidate","processCandidate","pc","RTCPeerConnection","getPeerConnectionConfig","addTrack","onicecandidate","handleIceCandidate","bind","onaddstream","handleRemoteStreamAdded","onremovestream","handleRemoteStreamRemoved","onconnectionstatechange","handlePeerConnectionStateChange","createOffer","setLocalAndSendOffer","handleCreateOfferError","addLog","connectionState","sessionDescription","setLocalDescription","sendSignal","offer","setRemoteDescription","RTCSessionDescription","createAnswer","setLocalAndSendAnswer","onCreateSessionDescriptionError","candidate","label","sdpMLineIndex","sdpMid","RTCIceCandidate","addIceCandidate","stop","iceServers","urls","PeerConnectionSignal","CallSignal","CallSignalType","CallStatus","OngoingCall","MessageType","OutgoingSignal","IncomingSignal","SignalType","OutgoingSignalData","StreamOptions","FilterPipe","items","searchText","toLowerCase","it","MessagePipe","addLocale","TimeAgoPipe","timeAgo","format","ApiService","http","cookieService","o","get","API_PATH","httpOptions","next","post","headers","AuthService","apiService","socketService","loggedInUserId","ob","setUser","registerUserOnSocker","logout","cred","setToken","token","set","pcConfig","sdpConstraints","offerToReceiveAudio","offerToReceiveVideo","dataChannelOptions","ordered","maxPacketLifeTime","CallService","isMaximizedWindow","localPeer","peer","status","Idle","_signal","JSON","parse","processCallSignal","callSignal","InitiateCall","Busy","RejectCall","Disconnect","AcceptCall","Incoming","sendCallSignal","InCall","callStartTime","initiateCall","onOffer","hendleAnswer","onCandidate","isGroupMessage","requestStream","Audio","Outgoing","streamId","closeConnection","sendSignalOverDataChannel","videoStream","videoTrack","getVideoTracks","dataChannerSender","audioTrack","getAudioTracks","enabled","requestScreen","closeAllConnections","dataChannel","doCall","doAnswer","trace","op","reject","audio","video","mediaDevices","getUserMedia","alert","captureStream","displayMediaStreamConstraints","navigator","createDC","createDataChannel","ondatachannel","onDataChannel","channel","attachEventsToDataChannel","callDesconnected","onerror","closePeerConnection","onopen","arguments","onclose","stringify","send","ChatService","notificationService","_metadata","groups","formatMessage","pushMessage","_activeUser","trigerNotification","info","initializeChat","refreshChatWindow","isGroup","response","fetchStatus","chat","senderId","receiverId","sendDate","resetUnreadCount","date","toLocaleString","hour","minute","hour12","text","timestamp","incoming","updateLastMessage","formData","FormData","append","string","URL","_","NotificationService","triggerNotification","ambiance","SocketService","socket","fromEvent","UserService","update","online","_user","populateUser","getAllUsers","processUsers","activeUserId","unreadCount","image","err","processUser","environment","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from \"@angular/core\";\r\nimport { Routes, RouterModule } from \"@angular/router\";\r\nimport { DashboardComponent } from \"./components/dashboard/dashboard.component\";\r\nimport { LoginComponent } from \"./components/login/login.component\";\r\nimport { RegisterComponent } from \"./components/register/register.component\";\r\nimport { AuthGuard } from \"./guards/auth.guard\";\r\n\r\nconst routes: Routes = [\r\n  { path: \"\", redirectTo: \"/login\", pathMatch: \"full\" },\r\n  { path: \"home\", component: DashboardComponent, canActivate: [AuthGuard] },\r\n  { path: \"login\", component: LoginComponent },\r\n  { path: \"register\", component: RegisterComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule {}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'chat-app';\r\n}\r\n","<div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n        <app-loader></app-loader>\r\n        <router-outlet></router-outlet>\r\n    </div>\r\n  </div>\r\n","import { BrowserModule } from \"@angular/platform-browser\";\r\nimport { HttpClientModule } from \"@angular/common/http\";\r\nimport { SocketIoModule, SocketIoConfig } from \"ngx-socket-io\";\r\nimport { ToppyModule } from \"toppy\";\r\nimport { AngularDraggableModule } from 'angular2-draggable';\r\n\r\nconst config: SocketIoConfig = { url: environment.SERVER_URL, options: {} };\r\n\r\nimport { NgModule } from \"@angular/core\";\r\n\r\nimport { AppRoutingModule } from \"./app-routing.module\";\r\nimport { AppComponent } from \"./app.component\";\r\nimport { SideMenuComponent } from \"./components/side-menu/side-menu.component\";\r\nimport { ChatMenuComponent } from \"./components/chat-menu/chat-menu.component\";\r\nimport { ChatWindowComponent } from \"./components/chat-window/chat-window.component\";\r\nimport { UserInfoComponent } from \"./components/user-info/user-info.component\";\r\nimport { DisconnectedModelComponent } from \"./components/models/disconnected-model/disconnected-model.component\";\r\nimport { CallModelComponent } from \"./components/models/call-model/call-model.component\";\r\nimport { SettingsModelComponent } from \"./components/models/settings-model/settings-model.component\";\r\nimport { EditProfileModelComponent } from \"./components/models/edit-profile-model/edit-profile-model.component\";\r\nimport { AddFriendModelComponent } from \"./components/models/add-friend-model/add-friend-model.component\";\r\nimport { NewGroupModelComponent } from \"./components/models/new-group-model/new-group-model.component\";\r\nimport { DashboardComponent } from \"./components/dashboard/dashboard.component\";\r\nimport { LoginComponent } from \"./components/login/login.component\";\r\nimport { RegisterComponent } from \"./components/register/register.component\";\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { NgxFileHelpersModule } from \"ngx-file-helpers\";\r\nimport { CookieService } from \"ngx-cookie-service\";\r\nimport { UserListItemComponent } from \"./components/chat-menu/user-list-item/user-list-item.component\";\r\nimport { UserListComponent } from \"./components/chat-menu/user-list/user-list.component\";\r\nimport { MessageListComponent } from \"./components/chat-window/message-list/message-list.component\";\r\nimport { MessageComponent } from \"./components/chat-window/message-list/message/message.component\";\r\nimport { environment } from 'src/environments/environment';\r\nimport { LoaderComponent } from './components/loader/loader.component';\r\nimport { PickerModule } from '@ctrl/ngx-emoji-mart';\r\nimport { ProfilePanelComponent } from './components/profile-panel/profile-panel.component';\r\nimport { TimeAgoPipe } from './pipes/time-ago.pipe';\r\nimport { FilterPipe } from './pipes/filter.pipe';\r\nimport { UserProfileImageComponent } from './components/user-profile-image/user-profile-image.component';\r\nimport { RightPanelComponent } from './components/right-panel/right-panel.component';\r\nimport { IncomingCallComponent } from './components/incoming-call/incoming-call.component';\r\nimport { MinCallWindowComponent } from './components/min-call-window/min-call-window.component';\r\nimport { MaxVideoCallComponent } from './components/max-video-call/max-video-call.component';\r\nimport { MessagePipe } from './pipes/message.pipe';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    SideMenuComponent,\r\n    ChatMenuComponent,\r\n    ChatWindowComponent,\r\n    UserInfoComponent,\r\n    DisconnectedModelComponent,\r\n    CallModelComponent,\r\n    SettingsModelComponent,\r\n    EditProfileModelComponent,\r\n    AddFriendModelComponent,\r\n    NewGroupModelComponent,\r\n    DashboardComponent,\r\n    LoginComponent,\r\n    RegisterComponent,\r\n    UserListItemComponent,\r\n    UserListComponent,\r\n    MessageListComponent,\r\n    MessageComponent,\r\n    LoaderComponent,\r\n    ProfilePanelComponent,\r\n    TimeAgoPipe,\r\n    FilterPipe,\r\n    UserProfileImageComponent,\r\n    RightPanelComponent,\r\n    IncomingCallComponent,\r\n    MinCallWindowComponent,\r\n    MaxVideoCallComponent,\r\n    MessagePipe\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    HttpClientModule,\r\n    AppRoutingModule,\r\n    FormsModule,\r\n    PickerModule,\r\n    ReactiveFormsModule,\r\n    SocketIoModule.forRoot(config),\r\n    ToppyModule,\r\n    NgxFileHelpersModule,\r\n    AngularDraggableModule\r\n  ],\r\n  providers: [CookieService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {}\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { UserService } from \"src/app/services/user.service\";\r\nimport { ChatService } from \"src/app/services/chat.service\";\r\n\r\n@Component({\r\n  selector: \"[app-chat-menu]\",\r\n  templateUrl: \"./chat-menu.component.html\",\r\n  styleUrls: [\"./chat-menu.component.scss\"]\r\n})\r\nexport class ChatMenuComponent implements OnInit {\r\n  users;\r\n  query=\"\";\r\n  constructor(\r\n    private userService: UserService,\r\n    private chatService: ChatService\r\n  ) {}\r\n  index = 0;\r\n  ngOnInit() {\r\n    this.userService.activeUsers.subscribe(data => {\r\n      if (data && data.length) {\r\n        this.users = data;\r\n        if (this.users[this.index]) this.updateActiveUser(this.index);\r\n      }\r\n    });\r\n  }\r\n\r\n  updateActiveUser(index) {\r\n    this.users[this.index].opened = false;\r\n    this.index = index;\r\n    this.chatService.setActiveUser(this.users[index]);\r\n    this.users[this.index].opened = true;\r\n  }\r\n}\r\n","<!-- sidebar group -->\r\n\r\n<!-- Chats sidebar -->\r\n<!-- <div id=\"chats\" class=\"sidebar active\">\r\n  <header>\r\n    <span>Chats</span>\r\n    <ul class=\"list-inline\">\r\n      <li class=\"list-inline-item\" data-toggle=\"tooltip\" title=\"New Group\">\r\n        <a class=\"btn btn-light\" data-toggle=\"modal\" data-target=\"#newGroup\">\r\n          <i class=\"fa fa-users\"></i>\r\n        </a>\r\n      </li>\r\n      <li class=\"list-inline-item\">\r\n          <a class=\"btn btn-light\" data-toggle=\"modal\" data-target=\"#addFriends\">\r\n            <i class=\"ti-plus btn-icon\"></i> Add Friends\r\n          </a>\r\n      </li>\r\n      <li class=\"list-inline-item d-lg-none d-sm-block\">\r\n        <a class=\"btn btn-light sidebar-close\">\r\n          <i class=\"ti-close\"></i>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </header>\r\n  <form action=\"\">\r\n    <input type=\"text\" class=\"form-control\" placeholder=\"Search chat\" />\r\n  </form>\r\n  <div class=\"sidebar-body\">\r\n        <app-user-list [users]=\"users\" (updateUser)=\"updateActiveUser($event)\" ></app-user-list>  \r\n  </div>\r\n</div> -->\r\n<!-- ./ Chats sidebar -->\r\n\r\n<!-- Favorites sidebar -->\r\n<!-- <div id=\"favorites\" class=\"sidebar\">\r\n  <header>\r\n    <span>Favorites</span>\r\n    <ul class=\"list-inline\">\r\n      <li class=\"list-inline-item d-lg-none d-sm-block\">\r\n        <a class=\"btn btn-light sidebar-close\">\r\n          <i class=\"ti-close\"></i>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </header>\r\n  <form action=\"\">\r\n    <input type=\"text\" class=\"form-control\" placeholder=\"Search favorites\" />\r\n  </form>\r\n  <div class=\"sidebar-body\">\r\n    <ul class=\"list-group list-group-flush users-list\">\r\n      <li class=\"list-group-item\">\r\n        <div class=\"users-list-body\">\r\n          <h5>Jennica Kindred</h5>\r\n          <p>I know how important this file is to you. You can trust me ;)</p>\r\n          <div class=\"users-list-action action-toggle\">\r\n            <div class=\"dropdown\">\r\n              <a data-toggle=\"dropdown\">\r\n                <i class=\"ti-more\"></i>\r\n              </a>\r\n              <div class=\"dropdown-menu dropdown-menu-right\">\r\n                <a class=\"dropdown-item\">View Chat</a>\r\n                <a class=\"dropdown-item\">Forward</a>\r\n                <a class=\"dropdown-item\">Delete</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li class=\"list-group-item\">\r\n        <div class=\"users-list-body\">\r\n          <h5>Marvin Rohan</h5>\r\n          <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>\r\n          <div class=\"users-list-action action-toggle\">\r\n            <div class=\"dropdown\">\r\n              <a data-toggle=\"dropdown\">\r\n                <i class=\"ti-more\"></i>\r\n              </a>\r\n              <div class=\"dropdown-menu dropdown-menu-right\">\r\n                <a class=\"dropdown-item\">View Chat</a>\r\n                <a class=\"dropdown-item\">Forward</a>\r\n                <a class=\"dropdown-item\">Delete</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li class=\"list-group-item\">\r\n        <div class=\"users-list-body\">\r\n          <h5>Frans Hanscombe</h5>\r\n          <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>\r\n          <div class=\"users-list-action action-toggle\">\r\n            <div class=\"dropdown\">\r\n              <a data-toggle=\"dropdown\">\r\n                <i class=\"ti-more\"></i>\r\n              </a>\r\n              <div class=\"dropdown-menu dropdown-menu-right\">\r\n                <a class=\"dropdown-item\">View Chat</a>\r\n                <a class=\"dropdown-item\">Forward</a>\r\n                <a class=\"dropdown-item\">Delete</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li class=\"list-group-item\">\r\n        <div class=\"users-list-body\">\r\n          <h5>Karl Hubane</h5>\r\n          <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>\r\n          <div class=\"users-list-action action-toggle\">\r\n            <div class=\"dropdown\">\r\n              <a data-toggle=\"dropdown\">\r\n                <i class=\"ti-more\"></i>\r\n              </a>\r\n              <div class=\"dropdown-menu dropdown-menu-right\">\r\n                <a class=\"dropdown-item\">View Chat</a>\r\n                <a class=\"dropdown-item\">Forward</a>\r\n                <a class=\"dropdown-item\">Delete</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</div> -->\r\n<!-- ./ Stars sidebar -->\r\n\r\n<!-- ./ sidebar group -->\r\n\r\n<div class=\"col-lg-3 col-md-3 col-xs-12 msg-list\">\r\n    <div class=\"col-md-12 search-bar-container\">\r\n        <input type=\"text\" class=\"searchbox\" placeholder=\"Search user\" [(ngModel)]=\"query\" />\r\n    </div>\r\n    <div class=\"col-md-12 sorting\">\r\n        <div class=\"btn-group\">\r\n            <label class=\"\">\r\n        Sort By:\r\n      </label>\r\n        </div>\r\n        <div class=\"btn-group\">\r\n            <button type=\"button\" class=\"btn dropdown-toggle sort-dropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n        Last received <span class=\"caret\"></span>\r\n      </button>\r\n            <ul class=\"dropdown-menu\">\r\n                <li><a href=\"#\">Action</a></li>\r\n                <li><a href=\"#\">Another action</a></li>\r\n                <li><a href=\"#\">Something else here</a></li>\r\n                <li role=\"separator\" class=\"divider\"></li>\r\n                <li><a href=\"#\">Separated link</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <app-user-list [users]=\"users | filter:query\" (updateUser)=\"updateActiveUser($event)\"></app-user-list>\r\n</div>","import { Component, OnInit, Input } from \"@angular/core\";\r\nimport { environment } from \"src/environments/environment.prod\";\r\nimport { UserService } from \"src/app/services/user.service\";\r\nimport { MessageType } from \"src/app/models/message\";\r\n\r\n@Component({\r\n  selector: \"[app-user-list-item]\",\r\n  templateUrl: \"./user-list-item.component.html\",\r\n  styleUrls: [\"./user-list-item.component.scss\"],\r\n})\r\nexport class UserListItemComponent implements OnInit {\r\n  @Input() user;\r\n  constructor(private userService: UserService) {}\r\n\r\n  ngOnInit() {\r\n    if (\r\n      this.user.lastMessage &&\r\n      (this.user.lastMessage.messageType === MessageType.Image ||\r\n        this.user.lastMessage.messageType === MessageType.Video ||\r\n        this.user.lastMessage.messageType === MessageType.File)\r\n    ) {\r\n      this.user.lastMessage.message = this.user.lastMessage.message\r\n        .split(\"/\")\r\n        .slice(-1)\r\n        .pop();\r\n    }\r\n  }\r\n  viewProfile() {\r\n    this.userService.viewProfile(this.user.userId);\r\n  }\r\n}\r\n","<ng-container *ngIf=\"user\">\r\n    <!-- <div>\r\n    <figure class=\"avatar\" [ngClass]=\"{'avatar-state-success':user.online,'avatar-state-danger':!user.online}\">\r\n      <img [src]=\"user.profileImagePath\" class=\"rounded-circle\" />\r\n    </figure>\r\n  </div>\r\n  <div class=\"users-list-body\">\r\n    <h5>{{ user.firstName + \" \" + user.lastName }}</h5>\r\n    <p>{{ user.bio }}</p>\r\n    <div class=\"users-list-action action-toggle\">\r\n      <div class=\"dropdown\">\r\n        <a data-toggle=\"dropdown\">\r\n          <i class=\"ti-more\"></i>\r\n        </a>\r\n        <div class=\"dropdown-menu dropdown-menu-right\">\r\n          <a class=\"dropdown-item\">Open</a>\r\n          <a (click)=\"viewProfile()\" class=\"dropdown-item\"\r\n            >Profile</a\r\n          >\r\n          <a class=\"dropdown-item\">Add to archive</a>\r\n          <a class=\"dropdown-item\">Delete</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div> -->\r\n\r\n    <div class=\"col-md-3 col-xs-4 user-img\">\r\n        <img [src]=\"user.profileImagePath\" />\r\n        <span class=\"friends-status\" [ngClass]=\"{ available: user.online, busy: !user.online }\"></span>\r\n    </div>\r\n    <div class=\"col-md-9 col-xs-8 friend-details\">\r\n        <h4 class=\"friend-name\">\r\n            {{ user.firstName + \" \" + user.lastName }}\r\n        </h4>\r\n        <p *ngIf=\"user.lastMessage\" class=\"friend-msg\">\r\n            {{ user.lastMessage.message }}\r\n        </p>\r\n        <span *ngIf=\"user.lastMessage\" class=\"msg-time\">{{\r\n      user.lastMessage.sendDate | timeAgo\r\n    }}</span>\r\n    </div>\r\n    <span *ngIf=\"user.unreadCount\" class=\"unread-tag\">{{ user.unreadCount }} Unread</span\r\n  >\r\n</ng-container>","import { Component, OnInit, Input, Output, EventEmitter } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-user-list\",\r\n  templateUrl: \"./user-list.component.html\",\r\n  styleUrls: [\"./user-list.component.scss\"]\r\n})\r\nexport class UserListComponent implements OnInit {\r\n  @Input() users;\r\n  @Output() updateUser = new EventEmitter();\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n\r\n  updateActiveUser(index){\r\n    this.updateUser.emit(index);\r\n  }\r\n}\r\n","<!-- <ul class=\"list-group list-group-flush\">\r\n  <li\r\n    app-user-list-item\r\n    class=\"list-group-item\"\r\n    [ngClass]=\"{ 'open-chat': user.opened }\"\r\n    *ngFor=\"let user of users; let i = index\"\r\n    [user]=\"user\"\r\n    (click)=\"updateActiveUser(i)\"\r\n  ></li>\r\n</ul> -->\r\n\r\n<div class=\"col-md-12 col-xs-12 msg-items\">\r\n    <div class=\"col-md-12 col-xs-12 msg-card\" app-user-list-item [ngClass]=\"{ 'active': user.opened }\" *ngFor=\"let user of users; let i = index\" [user]=\"user\" (click)=\"updateActiveUser(i)\">\r\n\r\n    </div>\r\n\r\n</div>","import { Component, OnInit, ViewChild, ChangeDetectorRef } from \"@angular/core\";\r\nimport { ChatService } from \"src/app/services/chat.service\";\r\nimport { Message, MessageType } from \"src/app/models/message\";\r\nimport { UserService } from \"src/app/services/user.service\";\r\nimport { ReadFile, FilePickerDirective } from \"ngx-file-helpers\";\r\nimport { environment } from \"src/environments/environment\";\r\nimport { CallService } from \"src/app/services/call.service\";\r\n\r\n@Component({\r\n  selector: \"[app-chat-window]\",\r\n  templateUrl: \"./chat-window.component.html\",\r\n  styleUrls: [\"./chat-window.component.scss\"],\r\n})\r\nexport class ChatWindowComponent implements OnInit {\r\n  user;\r\n  public picked: ReadFile;\r\n\r\n  @ViewChild(\"filePicker\", { static: true })\r\n  private filePicker: FilePickerDirective;\r\n  showEmojiPicker = false;\r\n  activeUser;\r\n  ongoingCall = false;\r\n  messageText = \"\";\r\n  query = \"\";\r\n  chatMessages: Message[] = [];\r\n  constructor(\r\n    private chatService: ChatService,\r\n    private userService: UserService,\r\n    private callService: CallService,\r\n    private cdr:ChangeDetectorRef\r\n  ) {\r\n    this.chatService.activeUserSubject.subscribe((user) => {\r\n      this.activeUser = user;\r\n      this.resetHeight();\r\n    });\r\n    this.chatService.activeMessages.subscribe((messages) => {\r\n      if (!messages) messages = [];\r\n      this.chatMessages = [...messages];\r\n      window[\"scrollToBottom\"]();\r\n      this.resetHeight();\r\n    });\r\n    this.chatService.searchSubject.subscribe((q) => {\r\n      this.query = q;\r\n    });\r\n    this.resetHeight();\r\n    this.user = this.userService.getUser();\r\n  }\r\n  viewProfile() {\r\n    this.userService.viewProfile(this.activeUser.userId);\r\n  }\r\n\r\n  call() {\r\n    console.log(this.activeUser);\r\n    this.callService.makeCall(this.activeUser.userId);\r\n  }\r\n\r\n  toggleEmojiPicker() {\r\n    this.showEmojiPicker = !this.showEmojiPicker;\r\n  }\r\n\r\n  addEmoji(event) {\r\n    this.messageText = `${this.messageText}${event.emoji.native}`;\r\n    this.showEmojiPicker = false;\r\n    window[\"$\"](\"#message-input\").focus();\r\n  }\r\n\r\n  toggleCall() {\r\n    this.call();\r\n    //this.ongoingCall = !this.ongoingCall;\r\n    this.resetHeight();\r\n  }\r\n\r\n  ignoreTooBigFile(file: File): boolean {\r\n    if (file.size >= 3000000) console.log(\"large file\");\r\n    return file.size < 3000000;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.resetHeight();\r\n  }\r\n  sendMessage() {\r\n    if (this.messageText.length) {\r\n      let type = this.chatService.isValidUrl(this.messageText)\r\n        ? MessageType.Url\r\n        : MessageType.Text;\r\n      this.chatService.sendMessage(this.messageText, type);\r\n      this.messageText = \"\";\r\n    }\r\n  }\r\n\r\n  onReadStart(fileCount: number) {\r\n    //file reading\r\n  }\r\n\r\n  onFilePicked(file: ReadFile) {\r\n    this.picked = file;\r\n  }\r\n\r\n  resetHeight() {\r\n    setTimeout(() => {\r\n      let $ = window[\"$\"];\r\n      if ($(\".audio-call\").outerHeight()) {\r\n        $(\".msg-container\").height(\r\n          window.screen.height -\r\n            $(\".audio-call\").outerHeight() -\r\n            $(\".msg-chat-header\").outerHeight() -\r\n            $(\".msgbox-container\").outerHeight() -\r\n            125\r\n        );\r\n      } else {\r\n        $(\".msg-container\").height(\r\n          window.screen.height -\r\n            $(\".msg-chat-header\").outerHeight() -\r\n            $(\".msgbox-container\").outerHeight() -\r\n            125\r\n        );\r\n      }\r\n      window[\"scrollToBottom\"]();\r\n    }, 100);\r\n  }\r\n\r\n  onReadEnd(fileCount: number) {\r\n    try {\r\n      let messageType = MessageType.File;\r\n      let content = this.picked.content;\r\n      switch (this.picked.type.split(\"/\")[0]) {\r\n        case \"image\":\r\n          messageType = MessageType.Image;\r\n          break;\r\n        case \"video\":\r\n          messageType = MessageType.Video;\r\n          break;\r\n        default:\r\n          content = this.picked.name;\r\n          break;\r\n      }\r\n      this.chatMessages.push({\r\n        id: \"\",\r\n        content: content,\r\n        from: this.user.userId,\r\n        to: this.activeUser.userId,\r\n        type: messageType,\r\n        timeStamp: new Date(),\r\n      });\r\n      this.chatService\r\n        .uploadFile(this.picked.underlyingFile)\r\n        .subscribe((res) => {\r\n          this.chatService.sendMessage(res.path, messageType);\r\n        });\r\n      this.filePicker.reset();\r\n    } catch (error) {}\r\n  }\r\n}\r\n","<div class=\"col-lg-7 col-lg-offset-3 col-md-6 col-md-offset-3 col-xs-12 p-l-r-0 msg-chatbox\">\r\n    <div *ngIf=\"activeUser\" class=\"col-md-12 col-xs-12 msg-chat-header\">\r\n        <div class=\"col-md-1 col-xs-3 msg-chatbox-img\">\r\n            <img [src]=\"activeUser.profileImagePath\" />\r\n            <span class=\"friends-status busy\"></span>\r\n        </div>\r\n        <div class=\"col-md-3 col-xs-5 friend-details\">\r\n            <h4 class=\"friend-name\">\r\n                {{ activeUser.firstName + \" \" + activeUser.lastName }}\r\n            </h4>\r\n            <ul class=\"hidden-sm hidden-md hidden-lg\">\r\n                <li>{{ activeUser.online ? \"Online\" : \"Offline\" }}</li>\r\n                <li>\r\n                    <span class=\"glyphicon glyphicon-time\" aria-hidden=\"true\"></span>Last seen 2 hrs ago\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"col-md-4 hidden-xs status-details\">\r\n            <ul>\r\n                <li>{{ activeUser.online ? \"Online\" : \"Offline\" }}</li>\r\n                <li>\r\n                    <span class=\"glyphicon glyphicon-time\" aria-hidden=\"true\"></span>Last seen 2 hrs ago\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"col-md-4 col-xs-4 setting-container\">\r\n            <ul class=\"setting\">\r\n                <li>\r\n                    <a href=\"javascript:void(0);\" class=\"privatechat\"> </a>\r\n                </li>\r\n                <!-- <li>\r\n                    <a href=\"javascript:void(0);\" class=\"screenshare\"></a>\r\n                </li>\r\n                <li>\r\n                    <a href=\"javascript:void(0);\" class=\"videocall\"></a>\r\n                </li> -->\r\n                <li>\r\n                    <a (click)=\"toggleCall()\" class=\"call\"> </a>\r\n                </li>\r\n                <li>\r\n                    <a (click)=\"viewProfile()\" class=\"settings\"> </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"ongoingCall\" class=\"col-md-12 audio-call\">\r\n        <div class=\"col-md-12\">\r\n            <p>\r\n                <span class=\"glyphicon glyphicon-star fav-icon\" aria-hidden=\"true\"></span>\r\n                <span class=\"caller-name\">Garvit Rajput</span> |\r\n                <span class=\"call-time\">14:28</span>\r\n            </p>\r\n        </div>\r\n        <div class=\"col-md-12 callers-section\">\r\n            <div class=\"col-md-6\"></div>\r\n            <div class=\"col-md-6 callers-list\">\r\n                <div class=\"col-md-3 caller\">\r\n                    <img src=\"assets/img/user4.jpg\" />\r\n                </div>\r\n                <div class=\"col-md-3 caller\">\r\n                    <img src=\"assets/img/user5.jpg\" />\r\n                </div>\r\n                <div class=\"col-md-3 caller add-caller\">\r\n                    <img src=\"assets/img/add-call.png\" />\r\n                    <span></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-md-12\">\r\n            <ul class=\"call-action\">\r\n                <li>\r\n                    <a href=\"javascript:void(0);\" class=\"screenshare\"> </a>\r\n                </li>\r\n                <li>\r\n                    <a href=\"javascript:void(0);\" class=\"mute\"> </a>\r\n                </li>\r\n                <li>\r\n                    <a href=\"javascript:void(0);\" class=\"disconnect\"> </a>\r\n                </li>\r\n                <li>\r\n                    <a href=\"javascript:void(0);\" class=\"chat\"> </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class=\"col-md-12 msg-container\" app-message-list [messages]=\"chatMessages|message:query\"></div>\r\n\r\n    <emoji-mart class=\"emoji-mart\" color=\"#3db16b\" [showPreview]=\"false\" [style]=\"{ position: 'absolute', bottom: '97px', right: '330px' }\" (emojiSelect)=\"addEmoji($event)\" *ngIf=\"showEmojiPicker\" title=\"Pick your emoji…\"></emoji-mart>\r\n    <div class=\"col-md-12 msgbox-container\">\r\n        <form class=\"m-0\" (submit)=\"sendMessage()\">\r\n            <div class=\"col-md-12\">\r\n                <input type=\"text\" class=\"msgbox\" placeholder=\"Type your message here...\" [(ngModel)]=\"messageText\" name=\"messageText\" id=\"message-input\" />\r\n                <ul class=\"action-item\">\r\n                    <li>\r\n                        <a href=\"javascript:void(0);\" class=\"attachment-icon\" #filePicker=\"ngxFilePicker\" ngxFilePicker [filter]=\"ignoreTooBigFile\" (readStart)=\"onReadStart($event)\" (filePick)=\"onFilePicked($event)\" (readEnd)=\"onReadEnd($event)\"></a>\r\n                    </li>\r\n                    <li>\r\n                        <a href=\"javascript:void(0);\" (click)=\"toggleEmojiPicker()\" class=\"smiley-icon\"></a>\r\n                    </li>\r\n                    <li>\r\n                        <a href=\"javascript:void(0);\" (click)=\"sendMessage()\" class=\"send-icon\"></a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>","import { Component, OnInit, Input } from \"@angular/core\";\r\nimport { Message } from \"src/app/models/message\";\r\nimport { ChatService } from 'src/app/services/chat.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\n\r\n@Component({\r\n  selector: \"[app-message-list]\",\r\n  templateUrl: \"./message-list.component.html\",\r\n  styleUrls: [\"./message-list.component.scss\"]\r\n})\r\nexport class MessageListComponent implements OnInit {\r\n  @Input() messages: Message[];\r\n  activeUser;\r\n  user;\r\n  constructor(private chatService: ChatService,userService:UserService) {\r\n    this.chatService.activeUserSubject.subscribe(user => {\r\n      this.activeUser = user;\r\n    });\r\n    this.user=userService.getUser();\r\n  }\r\n\r\n  ngOnInit() {}\r\n}\r\n","<!-- <div\r\n  [ngClass]=\"{ 'outgoing-message': message.to === activeUser?.userId }\"\r\n  class=\"message-item\"\r\n  app-message\r\n  *ngFor=\"let message of messages\"\r\n  [message]=\"message\"\r\n></div> -->\r\n\r\n<!--RECEIVED MESSAGE-->\r\n<div class=\"col-md-12 col-xs-12 msg\" [ngClass]=\"{\r\n    'send': message.to === activeUser?.userId,\r\n    'receive': message.to !== activeUser?.userId\r\n  }\" app-message *ngFor=\"let message of messages\" [message]=\"message\" [activeUser]=\"activeUser\" [user]=\"user\" [isReceived]=\"message.to !== activeUser?.userId\"></div>","import { Component, OnInit, Input } from \"@angular/core\";\r\nimport { Message, MessageType } from \"src/app/models/message\";\r\nimport { ChatService } from \"src/app/services/chat.service\";\r\nimport { environment } from \"src/environments/environment\";\r\n\r\n@Component({\r\n  selector: \"[app-message]\",\r\n  templateUrl: \"./message.component.html\",\r\n  styleUrls: [\"./message.component.scss\"],\r\n})\r\nexport class MessageComponent implements OnInit {\r\n  metadata;\r\n  hideinfo = false;\r\n  constructor(private chatService: ChatService) {}\r\n  @Input() message: Message;\r\n  @Input() isReceived: boolean;\r\n  @Input() activeUser;\r\n  @Input() user;\r\n  ngOnInit() {\r\n    this.message.id = this.message.timeStamp.valueOf().toString();\r\n    this.message.relativeTimeStamp = this.chatService.getTimeStamp(\r\n      this.message.timeStamp\r\n    );\r\n    if (\r\n      !environment.production && this.message.content.indexOf(environment.SERVER_URL)==-1&&\r\n      (this.message.type === MessageType.Image ||\r\n        this.message.type === MessageType.Video ||\r\n        this.message.type === MessageType.File)\r\n    ) {\r\n      this.message.content = environment.SERVER_URL + this.message.content;\r\n    }\r\n    if (this.message.type === MessageType.Url) {\r\n      this.chatService.getUrlMetadata(this.message.content).subscribe((res) => {\r\n        if (res.success) {\r\n          this.metadata = res.data.metadata;\r\n          this.metadata.url = this.message.content;\r\n          if (this.message.content.indexOf(this.metadata.title) > 1)\r\n            this.hideinfo = true;\r\n          window[\"scrollToBottom\"]();\r\n        }\r\n      });\r\n    }\r\n    if (this.message.type === MessageType.File) {\r\n      this.message.fileName = this.message.content.split(\"/\")[\r\n        this.message.content.split(\"/\").length - 1\r\n      ];\r\n    }\r\n  }\r\n}\r\n","<div *ngIf=\"isReceived\" class=\"col-lg-1 col-md-2 col-xs-2 msg-user-img\">\r\n    <img [src]=\"activeUser?.profileImagePath\" />\r\n</div>\r\n<div [id]=\"message.id\" [ngClass]=\"{ 'col-md-offset-1': !isReceived }\" class=\"col-lg-10 col-md-9 col-xs-10 p-l-r-0\">\r\n    <div class=\"col-md-12 col-xs-12 p-l-r-0\">\r\n        <span class=\"msg-name\">{{\r\n      isReceived\r\n        ? activeUser.firstName + \" \" + activeUser.lastName\r\n        : user.firstName + \" \" + user.lastName\r\n    }}</span>\r\n    </div>\r\n    <div class=\"col-md-12 col-xs-12 msg-content\" [ngClass]=\"{\r\n      url: message.type == 5\r\n    }\">\r\n        <p *ngIf=\"message.type == 1\">\r\n            {{ message.content }}\r\n        </p>\r\n        <img [src]=\"message.content+'?size=300'\" *ngIf=\"message.type == 2\" [alt]=\"message.content\" />\r\n        <div *ngIf=\"message.type == 3\">\r\n            <p>{{ message.fileName }}</p>\r\n            <a [href]=\"message.content\" target=\"_blank\">Download</a>\r\n        </div>\r\n        <video *ngIf=\"message.type == 4\" controls [src]=\"message.content\" class=\"card-img-top\" alt=\"message.content\"></video>\r\n\r\n        <div *ngIf=\"message.type == 5\">\r\n            <div *ngIf=\"metadata && (metadata.video || metadata.imagePath)\" [ngClass]=\"{\r\n          'col-md-4': metadata && !hideinfo,\r\n          'col-md-12': !(metadata && !hideinfo)\r\n        }\">\r\n                <img *ngIf=\"metadata.imagePath\" [src]=\"metadata.imagePath\" [alt]=\"metadata.title\" />\r\n                <video *ngIf=\"!metadata.imagePath\" [src]=\"metadata.video\"></video>\r\n            </div>\r\n\r\n            <p *ngIf=\"!metadata\">{{ message.content }}</p>\r\n            <div *ngIf=\"metadata && !hideinfo\" [ngClass]=\"{\r\n          'col-md-8': metadata.video || metadata.imagePath,\r\n          'col-md-12': !(metadata.video || metadata.imagePath)\r\n        }\">\r\n                <p>\r\n                    <span>{{ metadata.title }}</span> - {{ metadata.description }}\r\n                </p>\r\n                <a [href]=\"metadata.url\" target=\"_blank\">{{ metadata.url }}</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"col-md-12 col-xs-12 p-l-r-0\">\r\n        <span class=\"msg-time\">{{ message.timeStamp | timeAgo }}</span>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf=\"!isReceived\" class=\"col-lg-1 col-md-2 col-xs-2 msg-user-img\">\r\n    <img [src]=\"user?.profileImagePath\" />\r\n</div>","import { Component, OnInit } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-dashboard\",\r\n  templateUrl: \"./dashboard.component.html\",\r\n  styleUrls: [\"./dashboard.component.scss\"]\r\n})\r\nexport class DashboardComponent implements OnInit {\r\n  constructor() {\r\n    window[\"$\"](\".loader-container\").show();}\r\n\r\n  ngOnInit() {\r\n    setTimeout(() => {\r\n      window[\"$\"](\".loader-container\").hide();\r\n    }, 2000);\r\n  }\r\n}\r\n","<!--The content below is only a placeholder and can be replaced.-->\r\n\r\n<!-- page loading -->\r\n<!-- <div class=\"page-loading\"></div> -->\r\n<!-- ./ page loading -->\r\n\r\n<!-- models start -->\r\n\r\n<!-- <app-disconnected-model></app-disconnected-model>\r\n  <app-call-model></app-call-model>\r\n  <app-add-friend-model></app-add-friend-model>\r\n  <app-new-group-model></app-new-group-model>\r\n  <app-settings-model></app-settings-model>\r\n  <app-edit-profile-model></app-edit-profile-model> -->\r\n\r\n\r\n<app-max-video-call></app-max-video-call>\r\n\r\n\r\n<!-- models end -->\r\n<!-- layout -->\r\n<div class=\"layout\">\r\n\r\n    <!-- content -->\r\n    <div class=\"content\">\r\n        <div app-chat-menu class=\"sidebar-group hidden-xs\"></div>\r\n        <div app-chat-window class=\"chat hidden-xs\"></div>\r\n        <!-- <div app-user-info id=\"user-info\" class=\"sidebar-group\"></div> -->\r\n        <div app-right-panel class=\"col-lg-2 col-lg-offset-10 col-md-3 col-md-offset-9 col-xs-12 p-l-r-0 profile-panel\"></div>\r\n    </div>\r\n    <!-- ./ content -->\r\n</div>\r\n<!-- ./ layout -->","import { Component, OnInit } from \"@angular/core\";\r\nimport { CallService } from \"src/app/services/call.service\";\r\nimport { UserService } from \"src/app/services/user.service\";\r\n\r\n@Component({\r\n  selector: \"app-incoming-call\",\r\n  templateUrl: \"./incoming-call.component.html\",\r\n  styleUrls: [\"./incoming-call.component.scss\"],\r\n})\r\nexport class IncomingCallComponent implements OnInit {\r\n  callingUser;\r\n  constructor(\r\n    private callService: CallService,\r\n    private userService: UserService\r\n  ) {\r\n    this.callService.incomingCall.subscribe((id) => {\r\n      this.callingUser = this.userService.getUserByUserId(id);\r\n      console.log(this.callingUser);\r\n    });\r\n  }\r\n  reject(){\r\n    this.callService.rejectCall(this.callingUser.userId);\r\n    this.callingUser=null;\r\n  }\r\n  accept(){\r\n    this.callService.acceptCall(this.callingUser.userId);\r\n    this.callingUser=null;\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n}\r\n","<div ngDraggable *ngIf=\"callingUser\" class=\"col-md-12 col-xs-12 p-l-r-0 incoming-call-window\">\r\n    <div class=\"col-md-8 col-md-offset-2 col-xs-8 col-xs-offset-2 incoming-caller\">\r\n        <div class=\"col-md-12 col-xs-12 animation-border\">\r\n            <img [src]=\"callingUser.profileImagePath\" />\r\n        </div>\r\n    </div>\r\n    <div class=\"col-md-12 col-xs-12\">\r\n        <h4>\r\n            {{ callingUser.firstName + \" \" + callingUser.lastName }}\r\n        </h4>\r\n    </div>\r\n    <div class=\"col-md-8 col-md-offset-2 col-xs-8 col-xs-offset-2 m-t-25 call-action-container\">\r\n        <div (click)=\"accept()\" class=\"call-option accept\">\r\n            <a href=\"javascript:void(0);\"></a>\r\n            <span>Confirm</span>\r\n        </div>\r\n        <div (click)=\"reject()\" class=\"call-option cancel\">\r\n            <a href=\"javascript:void(0);\"></a>\r\n            <span>Reject</span>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-loader\",\r\n  templateUrl: \"./loader.component.html\",\r\n  styleUrls: [\"./loader.component.css\"]\r\n})\r\nexport class LoaderComponent implements OnInit {\r\n  displayLoader = false;\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n}\r\n","<div style=\"display:none\" class=\"loader-container\">\r\n  <div class=\"loading\">\r\n    <div class=\"finger finger-1\">\r\n      <div class=\"finger-item\"><span></span><i></i></div>\r\n    </div>\r\n    <div class=\"finger finger-2\">\r\n      <div class=\"finger-item\"><span></span><i></i></div>\r\n    </div>\r\n    <div class=\"finger finger-3\">\r\n      <div class=\"finger-item\"><span></span><i></i></div>\r\n    </div>\r\n    <div class=\"finger finger-4\">\r\n      <div class=\"finger-item\"><span></span><i></i></div>\r\n    </div>\r\n    <div class=\"last-finger\">\r\n      <div class=\"last-finger-item\"><i></i></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, OnDestroy } from \"@angular/core\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { Router } from \"@angular/router\";\r\nimport { AuthService } from \"src/app/services/auth.service\";\r\n\r\n@Component({\r\n  selector: \"app-login\",\r\n  templateUrl: \"./login.component.html\",\r\n  styleUrls: [\"./login.component.scss\"]\r\n})\r\nexport class LoginComponent implements OnInit, OnDestroy {\r\n  loginForm: FormGroup;\r\n  submitted = false;\r\n  waitingResponse=false;\r\n  message: string = \"\";\r\n  constructor(\r\n    private router: Router,\r\n    private formBuilder: FormBuilder,\r\n    private authService: AuthService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.authService.logOut();\r\n    document.getElementsByTagName(\"body\")[0].classList.add(\"form-membership\");\r\n    this.loginForm = this.formBuilder.group({\r\n      email: [\"\", [Validators.required, Validators.email]],\r\n      password: [\"\", [Validators.required, Validators.minLength(6)]]\r\n    });\r\n  }\r\n  get f() {\r\n    return this.loginForm.controls;\r\n  }\r\n  signIn() {\r\n    this.message = \"\";\r\n    this.submitted = true;\r\n    // stop here if form is invalid\r\n    if (this.loginForm.invalid) {\r\n      return;\r\n    }\r\n    this.waitingResponse=true;\r\n    this.authService\r\n      .authenticate(this.loginForm.value)\r\n      .subscribe((res: any) => {\r\n        this.waitingResponse=false;\r\n        if (res) {\r\n          this.router.navigate([\"home\"]);\r\n        } else {\r\n          this.message = \"Invalid Credentials\";\r\n        }\r\n      });\r\n  }\r\n  ngOnDestroy() {\r\n    document\r\n      .getElementsByTagName(\"body\")[0]\r\n      .classList.remove(\"form-membership\");\r\n  }\r\n}\r\n","<div class=\"col-md-7 hidden-xs user-auth-static\">\r\n</div>\r\n<div class=\"col-md-5 col-md-offset-7 col-xs-12 user-auth-form-container\">\r\n    <form [formGroup]=\"loginForm\" (ngSubmit)=\"signIn()\">\r\n        <div class=\"col-dm-12 col-xs-12 user-auth-form\">\r\n            <div class=\"col-xs-12\">\r\n                <h3>\r\n                    Hey Ambrose! Please Login to Your Account!\r\n                </h3>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12 p-l-r-0\">\r\n                <div class=\"col-md-5 col-xs-6\">\r\n                    <a href=\"javascript:void(0);\" class=\"btn social-login fb\">\r\n                Facebook\r\n              </a>\r\n                </div>\r\n                <div class=\"col-md-5 col-xs-6\">\r\n                    <a href=\"javascript:void(0);\" class=\"btn social-login tw\">\r\n                Twitter\r\n              </a>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12 m-t-50\">\r\n                <span class=\"seprator\">\r\n              <span class=\"seprator-content\">OR</span>\r\n                </span>\r\n            </div>\r\n            <div class=\"col-md-9 m-t-10\" *ngIf=\"message!==''\">\r\n                <div class=\" alert alert-danger \">\r\n                    <strong>Failure!</strong> {{ message }}\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-9 col-xs-12 field-container\">\r\n                <div class=\"field\">\r\n                    <input formControlName=\"email\" type=\"email\" [ngClass]=\"{\r\n                  'form-control-invalid':\r\n                    submitted &&\r\n                    f.email.errors &&\r\n                    (f.email.errors.required || f.email.errors.email)\r\n                }\" placeholder=\"Email\" required name=\"email\" id=\"email\" placeholder=\"jane.appleseed@example.com\" />\r\n                    <label for=\"email\">Email Address</label>\r\n                </div>\r\n\r\n                <div class=\"field\">\r\n                    <input formControlName=\"password\" type=\"password\" placeholder=\"Password\" [ngClass]=\"{\r\n                  'form-control-invalid':\r\n                    submitted &&\r\n                    f.password.errors &&\r\n                    (f.password.errors.required || f.password.errors.minlength)\r\n                }\" required name=\"password\" id=\"password\" placeholder=\"********\" />\r\n                    <label for=\"password\">Password</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-9 col-xs-12\">\r\n                <div class=\"col-md-6 col-xs-6 p-l-0\">\r\n\r\n                </div>\r\n                <div class=\"col-md-6 col-xs-6 p-r-0\">\r\n                    <a class=\"forgot-password\" href=\"javascript:void(0);\">\r\n                Forgot Password?\r\n              </a>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"waitingResponse\" class=\"progress-bar\">\r\n                <div class=\"progress-bar-value\"></div>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12 m-t-25\">\r\n                <svg class=\"spinner\" *ngIf=\"waitingResponse\" width=\"40px\" height=\"40px\" viewBox=\"0 0 66 66\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <circle class=\"path\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\" cx=\"33\" cy=\"33\" r=\"30\"></circle>\r\n                 </svg>\r\n                <a *ngIf=\"!waitingResponse\" (click)=\"signIn()\" class=\"btn auth-btn active-screen\">\r\n              Login\r\n            </a>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12 m-t-15\">\r\n                <p class=\"redirect\">\r\n                    Don't have an account? <a routerLink=\"/register\">Sign Up!</a>\r\n                </p>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12 m-t-20\">\r\n                <ul class=\"footer-link\">\r\n                    <li>\r\n                        <a href=\"javascript:void(0);\">\r\n                  Terms and Conditions\r\n                </a>\r\n                    </li>\r\n                    <li>\r\n                        <a href=\"javascript:void(0);\">\r\n                  Privacy Policy\r\n                </a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>","import { Component, OnInit, ChangeDetectorRef } from \"@angular/core\";\r\nimport { CallService } from \"src/app/services/call.service\";\r\n\r\n@Component({\r\n  selector: \"app-max-video-call\",\r\n  templateUrl: \"./max-video-call.component.html\",\r\n  styleUrls: [\"./max-video-call.component.scss\"],\r\n})\r\nexport class MaxVideoCallComponent implements OnInit {\r\n  remoteStream;\r\n  localStream;\r\n  videoDisabled = true;\r\n  screenDisabled = true;\r\n  streams = {};\r\n  videoStream;\r\n  audioDisabled = false;\r\n  maxWindow = false;\r\n  constructor(\r\n    private callService: CallService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.callService.remoteStreamSubject.subscribe((stream) => {\r\n      this.remoteStream = stream;\r\n      this.cdr.detectChanges();\r\n    });\r\n    this.callService.localStreamSubject.subscribe((stream) => {\r\n      this.localStream = stream;\r\n      this.cdr.detectChanges();\r\n    });\r\n    this.callService.streamSubject.subscribe((s) => {\r\n      if (s.id) this.streams[s.id] = s.stream;\r\n      this.cdr.detectChanges();\r\n    });\r\n    this.callService.maximizeWindow.subscribe((flag) => {\r\n      this.maxWindow = flag;\r\n      console.log(\"called\");\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  toggleWindow() {\r\n    this.callService.toggleWindow();\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  getMainVideoStream() {\r\n    if (\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_screen\"] &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_screen\"].id\r\n    )\r\n      return this.streams[\r\n        this.callService.ongoingCall.connectedUserId + \"_screen\"\r\n      ];\r\n    else if (\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_video\"] &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_video\"].id\r\n    )\r\n      return this.streams[\r\n        this.callService.ongoingCall.connectedUserId + \"_video\"\r\n      ];\r\n    else return null;\r\n  }\r\n  getSecondaryVideoStream() {\r\n    if (\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_screen\"] &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_screen\"]\r\n        .id &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_video\"] &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_video\"].id\r\n    ) {\r\n      return this.streams[\r\n        this.callService.ongoingCall.connectedUserId + \"_video\"\r\n      ];\r\n    } else return null;\r\n  }\r\n\r\n  toggleVideo() {\r\n    if (this.videoDisabled) {\r\n      this.callService.enableVideo();\r\n    } else {\r\n      this.callService.disableVideo();\r\n    }\r\n    this.videoDisabled = !this.videoDisabled;\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  toggleScreen() {\r\n    if (this.screenDisabled) {\r\n      this.callService.enableScreen();\r\n    } else {\r\n      this.callService.disableScreen();\r\n    }\r\n    this.screenDisabled = !this.screenDisabled;\r\n    this.cdr.detectChanges();\r\n  }\r\n  toggleMute() {\r\n    this.callService.toggleMute();\r\n    this.audioDisabled = !this.audioDisabled;\r\n    this.cdr.detectChanges();\r\n  }\r\n  disconnect() {\r\n    this.callService.disconnect();\r\n  }\r\n}\r\n","<div\r\n  *ngIf=\"maxWindow && remoteStream.id\"\r\n  class=\"max-video-call container-fluid embed-responsive embed-responsive-4by3\"\r\n>\r\n  <video\r\n    class=\"embed-responsive-item\"\r\n    *ngIf=\"getMainVideoStream()\"\r\n    autoplay\r\n    [srcObject]=\"getMainVideoStream()\"\r\n    muted\r\n  ></video>\r\n  <a class=\"minimize\" (click)=\"toggleWindow()\" href=\"javascript:void(0);\"></a>\r\n  <div class=\"col-md-8 user-details\">\r\n    <p>\r\n      <span class=\"name\">Garvit Rajput</span> | <span class=\"time\">14:30</span>\r\n    </p>\r\n  </div>\r\n  <div *ngIf=\"localStream.id\" class=\"col-md-2 p-l-r-0 child-left\">\r\n    <div class=\"embed-responsive embed-responsive-16by9\">\r\n      <video\r\n        muted\r\n        [srcObject]=\"localStream\"\r\n        autoplay\r\n        class=\"embed-responsive-item\"\r\n      ></video>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"getSecondaryVideoStream()\" class=\"col-md-2 p-l-r-0 child-right\">\r\n    <div class=\"embed-responsive embed-responsive-16by9\">\r\n      <video\r\n        muted\r\n        autoplay\r\n        [srcObject]=\"getSecondaryVideoStream()\"\r\n        class=\"embed-responsive-item\"\r\n      ></video>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-md-12 call-action\">\r\n    <ul>\r\n      <li>\r\n        <a\r\n          href=\"javascript:void(0);\"\r\n          (click)=\"toggleScreen()\"\r\n          class=\"screenshare\"\r\n          [ngClass]=\"{ active: screenDisabled }\"\r\n        >\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a\r\n          href=\"javascript:void(0);\"\r\n          (click)=\"toggleMute()\"\r\n          [ngClass]=\"{ active: audioDisabled }\"\r\n          class=\"mute\"\r\n        >\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a href=\"javascript:void(0);\" (click)=\"disconnect()\" class=\"disconnect\">\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a\r\n          href=\"javascript:void(0);\"\r\n          (click)=\"toggleVideo()\"\r\n          [ngClass]=\"{ active: videoDisabled }\"\r\n          class=\"video\"\r\n        >\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, ChangeDetectorRef } from \"@angular/core\";\r\nimport { CallService } from \"src/app/services/call.service\";\r\n\r\n@Component({\r\n  selector: \"app-min-call-window\",\r\n  templateUrl: \"./min-call-window.component.html\",\r\n  styleUrls: [\"./min-call-window.component.scss\"],\r\n})\r\nexport class MinCallWindowComponent implements OnInit {\r\n  remoteStream;\r\n  localStream;\r\n  videoDisabled = true;\r\n  streams = {};\r\n  videoStream;\r\n  screenDisabled = true;\r\n  audioDisabled = false;\r\n  maxWindow: boolean=false;\r\n  constructor(\r\n    private callService: CallService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.callService.remoteStreamSubject.subscribe((stream) => {\r\n      this.remoteStream = stream;\r\n      this.cdr.detectChanges();\r\n    });\r\n    this.callService.localStreamSubject.subscribe((stream) => {\r\n      this.localStream = stream;\r\n      this.cdr.detectChanges();\r\n    });\r\n    this.callService.streamSubject.subscribe((s) => {\r\n      if (s.id) this.streams[s.id] = s.stream;\r\n      this.cdr.detectChanges();\r\n    });\r\n    this.callService.maximizeWindow.subscribe((flag) => {\r\n      this.maxWindow = flag;\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  getMainVideoStream() {\r\n    if (\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_screen\"] &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_screen\"].id\r\n    )\r\n      return this.streams[\r\n        this.callService.ongoingCall.connectedUserId + \"_screen\"\r\n      ];\r\n    else if (\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_video\"] &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_video\"].id\r\n    )\r\n      return this.streams[\r\n        this.callService.ongoingCall.connectedUserId + \"_video\"\r\n      ];\r\n    else return null;\r\n  }\r\n  getSecondaryVideoStream() {\r\n    if (\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_screen\"] &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_screen\"]\r\n        .id &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_video\"] &&\r\n      this.streams[this.callService.ongoingCall.connectedUserId + \"_video\"].id\r\n    ) {\r\n      return this.streams[\r\n        this.callService.ongoingCall.connectedUserId + \"_video\"\r\n      ];\r\n    } else return null;\r\n  }\r\n  toggleWindow() {\r\n    this.callService.toggleWindow();\r\n  }\r\n\r\n  toggleVideo() {\r\n    if (this.videoDisabled) {\r\n      this.callService.enableVideo();\r\n    } else {\r\n      this.callService.disableVideo();\r\n    }\r\n    this.videoDisabled = !this.videoDisabled;\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  toggleScreen() {\r\n    if (this.screenDisabled) {\r\n      this.callService.enableScreen();\r\n    } else {\r\n      this.callService.disableScreen();\r\n    }\r\n    this.screenDisabled = !this.screenDisabled;\r\n    this.cdr.detectChanges();\r\n  }\r\n  toggleMute() {\r\n    this.callService.toggleMute();\r\n    this.audioDisabled = !this.audioDisabled;\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  disconnect() {\r\n    this.callService.disconnect();\r\n  }\r\n}\r\n","<div\r\n  *ngIf=\"remoteStream.id && !maxWindow\"\r\n  class=\"col-md-12 p-l-r-0 min-call-window\"\r\n>\r\n  <a class=\"maximize\" (click)=\"toggleWindow()\" href=\"javascript:void(0);\"></a>\r\n  <div class=\"col-md-12\">\r\n    <p>\r\n      <span class=\"glyphicon glyphicon-star fav-icon\" aria-hidden=\"true\"></span>\r\n      <span class=\"caller-name\">Garvit Rajput</span> |\r\n      <span class=\"call-time\">14:28</span>\r\n    </p>\r\n  </div>\r\n\r\n  <!--AUDIO BEGIN-->\r\n  <div *ngIf=\"!getMainVideoStream()\" class=\"col-md-12 p-l-r-0 audio\">\r\n    <div class=\"col-md-12 user-list\">\r\n      <ul>\r\n        <li>\r\n          <img src=\"assets/img/user3.jpg\" />\r\n        </li>\r\n        <li>\r\n          <img src=\"assets/img/user5.jpg\" />\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n  <!--AUDIO END-->\r\n\r\n  <!-- VIDEO BEGIN -->\r\n  <div *ngIf=\"getMainVideoStream()\" class=\"col-md-12 p-l-r-0 video\">\r\n    <div class=\"col-md-12 p-l-r-0 master\">\r\n      <div class=\"embed-responsive embed-responsive-4by3\">\r\n        <video\r\n          *ngIf=\"getMainVideoStream()\"\r\n          autoplay\r\n          [srcObject]=\"getMainVideoStream()\"\r\n          muted\r\n          class=\"embed-responsive-item\"\r\n        ></video>\r\n      </div>\r\n      <div\r\n        *ngIf=\"getSecondaryVideoStream()\"\r\n        class=\"col-md-4 p-l-r-0 child-left\"\r\n      >\r\n        <div class=\"embed-responsive embed-responsive-4by3\">\r\n          <video\r\n            muted\r\n            [srcObject]=\"getSecondaryVideoStream()\"\r\n            autoplay\r\n            class=\"embed-responsive-item\"\r\n          ></video>\r\n        </div>\r\n      </div>\r\n      <div *ngIf=\"localStream.id\" class=\"col-md-4 p-l-r-0 child\">\r\n        <div class=\"embed-responsive embed-responsive-4by3\">\r\n          <video\r\n            muted\r\n            [srcObject]=\"localStream\"\r\n            autoplay\r\n            class=\"embed-responsive-item\"\r\n          ></video>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!--VIDEO END-->\r\n\r\n  <div class=\"col-md-12 call-action\">\r\n    <ul>\r\n      <li>\r\n        <a\r\n          href=\"javascript:void(0);\"\r\n          (click)=\"toggleScreen()\"\r\n          class=\"screenshare\"\r\n          [ngClass]=\"{'active':screenDisabled}\"\r\n        >\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a href=\"javascript:void(0);\" (click)=\"toggleMute()\" [ngClass]=\"{'active':audioDisabled}\" class=\"mute\"> </a>\r\n      </li>\r\n      <li>\r\n        <a href=\"javascript:void(0);\" (click)=\"disconnect()\" class=\"disconnect\">\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a href=\"javascript:void(0);\" (click)=\"toggleVideo()\" [ngClass]=\"{'active':videoDisabled}\" class=\"video\"> </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</div>\r\n<video\r\n  *ngIf=\"remoteStream.id\"\r\n  class=\"hidden\"\r\n  [srcObject]=\"remoteStream\"\r\n  autoplay\r\n  class=\"embed-responsive-item\"\r\n></video>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-add-friend-model',\r\n  templateUrl: './add-friend-model.component.html',\r\n  styleUrls: ['./add-friend-model.component.scss']\r\n})\r\nexport class AddFriendModelComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<!-- add friends modal -->\r\n<div class=\"modal fade\" id=\"addFriends\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-zoom\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">\r\n                    <i class=\"ti-user\"></i> Add Friends\r\n                </h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <i class=\"ti-close\"></i>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <div class=\"alert alert-info\">Send invitations to friends.</div>\r\n                <form>\r\n                    <div class=\"form-group\">\r\n                        <label for=\"emails\" class=\"col-form-label\">Email addresses</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"emails\">\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <label for=\"message\" class=\"col-form-label\">Invitation message</label>\r\n                        <textarea class=\"form-control\" id=\"message\"></textarea>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-primary\">Submit</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- ./ add friends modal -->","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-call-model',\r\n  templateUrl: './call-model.component.html',\r\n  styleUrls: ['./call-model.component.scss']\r\n})\r\nexport class CallModelComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<!-- call modal -->\r\n<div class=\"modal call fade\" id=\"call\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-zoom\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-body\">\r\n                <div class=\"call\">\r\n                    <div class=\"call-background\" style=\"background: url(/assets/images/call-bg.png)\"></div>\r\n                    <div>\r\n                        <figure class=\"mb-4 avatar avatar-xl\">\r\n                            <img src=\"https://banner2.kisspng.com/20180523/tha/kisspng-businessperson-computer-icons-avatar-clip-art-lattice-5b0508dc6a3a10.0013931115270566044351.jpg\" class=\"rounded-circle\">\r\n                        </figure>\r\n                        <h4 class=\"text-center\">Jennica Kindred calling ...</h4>\r\n                        <div class=\"action-button\">\r\n                            <button type=\"button\" class=\"btn btn-danger btn-floating btn-lg\" data-dismiss=\"modal\">\r\n                                <i class=\"ti-close\"></i>\r\n                            </button>\r\n                            <button type=\"button\" class=\"btn btn-success btn-pulse btn-floating btn-lg\">\r\n                                <i class=\"fa fa-phone\"></i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- ./ call modal -->","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-disconnected-model',\r\n  templateUrl: './disconnected-model.component.html',\r\n  styleUrls: ['./disconnected-model.component.scss']\r\n})\r\nexport class DisconnectedModelComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<!-- disconnected modal -->\r\n<div class=\"modal fade\" id=\"disconnected\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-zoom\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-body\">\r\n                <div class=\"connection-error\">\r\n                    <h4 class=\"text-center\">Application disconnected...</h4>\r\n                    <svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\"\r\n                        xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"862.899px\" height=\"862.9px\"\r\n                        viewBox=\"0 0 862.899 862.9\" style=\"enable-background:new 0 0 862.899 862.9;\"\r\n                        xml:space=\"preserve\">\r\n                        <g>\r\n                            <g>\r\n                                <circle cx=\"385.6\" cy=\"656.1\" r=\"79.8\" />\r\n                                <path d=\"M561.7,401c-15.801-10.3-32.601-19.2-50.2-26.6c-39.9-16.9-82.3-25.5-126-25.5c-44.601,0-87.9,8.9-128.6,26.6\r\n                                      c-39.3,17-74.3,41.3-104.1,72.2L253.5,545c34.899-36.1,81.8-56,132-56c49,0,95.1,19.1,129.8,53.8l25.4-25.399L493,469.7L561.7,401\r\n                                      z\" />\r\n                                <path d=\"M385.6,267.1c107.601,0,208.9,41.7,285.3,117.4l98.5-99.5c-50-49.5-108.1-88.4-172.699-115.6\r\n                                      c-66.9-28.1-138-42.4-211.101-42.4c-73.6,0-145,14.4-212.3,42.9c-65,27.5-123.3,66.8-173.3,116.9l99,99\r\n                                      C175.5,309.299,277.3,267.1,385.6,267.1z\" />\r\n                                <polygon points=\"616.8,402.5 549.7,469.599 639.2,559.099 549.7,648.599 616.8,715.7 706.3,626.2 795.8,715.7 862.899,648.599\r\n                                      773.399,559.099 862.899,469.599 795.8,402.5 706.3,492 \t\t\" />\r\n                            </g>\r\n                        </g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                        <g></g>\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer justify-content-center\">\r\n                <button type=\"button\" class=\"btn btn-primary btn-lg\">Reconnect</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- ./ disconnected modal -->","import { Component, OnInit } from \"@angular/core\";\r\nimport { UserService } from \"src/app/services/user.service\";\r\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\r\nimport { environment } from \"src/environments/environment.prod\";\r\n\r\n@Component({\r\n  selector: \"app-edit-profile-model\",\r\n  templateUrl: \"./edit-profile-model.component.html\",\r\n  styleUrls: [\"./edit-profile-model.component.scss\"]\r\n})\r\nexport class EditProfileModelComponent implements OnInit {\r\n  user;\r\n  imageSelected;\r\n  profileForm: FormGroup;\r\n  submitted = false;\r\n  profileImagePath: string;\r\n  button_text: String = \"Save\";\r\n  constructor(\r\n    private userService: UserService,\r\n    private formBuilder: FormBuilder\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.userService.userSubject.subscribe(d => {\r\n      this.user = d;\r\n      if (d.profileImagePath && d.profileImagePath.indexOf(\"https://ui-avatars.com\") === -1)\r\n        this.profileImagePath = `${environment.SERVER_URL}${d.profileImagePath}`;\r\n      this.profileForm = this.formBuilder.group({\r\n        firstName: [this.user.firstName, Validators.required],\r\n        lastName: [this.user.lastName, Validators.required],\r\n        mobile: [this.user.mobile],\r\n        website: [this.user.website],\r\n        city: [this.user.city],\r\n        state: [this.user.state],\r\n        country: [this.user.country],\r\n        bio: [this.user.bio],\r\n        profileImagePath: [this.user.profileImagePath],\r\n        facebookProfileUrl: [this.user.facebookProfileUrl],\r\n        linkedInProfileUrl: [this.user.linkedInProfileUrl],\r\n        twitterProfileUrl: [this.user.twitterProfileUrl],\r\n        googlePlusProfileUrl: [this.user.googlePlusProfileUrl],\r\n        instagramProfileUrl: [this.user.instagramProfileUrl],\r\n        dribbleProfileUrl: [this.user.dribbleProfileUrl]\r\n      });\r\n    });\r\n  }\r\n\r\n  // convenience getter for easy access to form fields\r\n  get f() {\r\n    return this.profileForm.controls;\r\n  }\r\n  selectImage(file) {\r\n    let reader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      setTimeout(() => {\r\n        this.profileImagePath = e.target.result;\r\n      });\r\n    };\r\n    this.imageSelected = file.target.files[0];\r\n    reader.readAsDataURL(this.imageSelected);\r\n  }\r\n\r\n  submit() {\r\n    this.submitted = true;\r\n\r\n    // stop here if form is invalid\r\n    if (this.profileForm.invalid) {\r\n      window[\"$\"]('.nav-tabs a[href=\"#personal\"]').tab(\"show\");\r\n      return;\r\n    }\r\n    this.userService\r\n      .updateUserProfile(this.profileForm.value, this.imageSelected)\r\n      .subscribe(res => {\r\n        if (res) this.button_text = \"Saved successfully\";\r\n        else this.button_text = \"Failed\";\r\n        setTimeout(() => {\r\n          this.button_text = \"Save\";\r\n        }, 3000);\r\n      });\r\n  }\r\n}\r\n","<!-- edit profile modal -->\r\n<div\r\n  class=\"modal fade\"\r\n  id=\"editProfileModal\"\r\n  tabindex=\"-1\"\r\n  role=\"dialog\"\r\n  aria-labelledby=\"exampleModalLabel\"\r\n  aria-hidden=\"true\"\r\n>\r\n  <div\r\n    class=\"modal-dialog modal-dialog-centered modal-dialog-zoom\"\r\n    role=\"document\"\r\n  >\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\"><i class=\"ti-pencil\"></i> Profile Edit</h5>\r\n        <button\r\n          type=\"button\"\r\n          class=\"close\"\r\n          data-dismiss=\"modal\"\r\n          aria-label=\"Close\"\r\n        >\r\n          <i class=\"ti-close\"></i>\r\n        </button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <ul class=\"nav nav-tabs\" role=\"tablist\">\r\n          <li class=\"nav-item\">\r\n            <a\r\n              class=\"nav-link active\"\r\n              data-toggle=\"tab\"\r\n              href=\"#personal\"\r\n              role=\"tab\"\r\n              aria-controls=\"personal\"\r\n              aria-selected=\"true\"\r\n              >Personal</a\r\n            >\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a\r\n              class=\"nav-link\"\r\n              data-toggle=\"tab\"\r\n              href=\"#about\"\r\n              role=\"tab\"\r\n              aria-controls=\"about\"\r\n              aria-selected=\"false\"\r\n              >About</a\r\n            >\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a\r\n              class=\"nav-link\"\r\n              data-toggle=\"tab\"\r\n              href=\"#social-links\"\r\n              role=\"tab\"\r\n              aria-controls=\"social-links\"\r\n              aria-selected=\"false\"\r\n              >Social Links</a\r\n            >\r\n          </li>\r\n        </ul>\r\n        <form [formGroup]=\"profileForm\">\r\n          <div class=\"tab-content\">\r\n            <div class=\"tab-pane show active\" id=\"personal\" role=\"tabpanel\">\r\n              <div class=\"form-group\">\r\n                <label for=\"firstName\" class=\"col-form-label\">First Name</label>\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\">\r\n                      <i class=\"ti-user\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    formControlName=\"firstName\"\r\n                    [ngClass]=\"{\r\n                      'form-control-invalid':\r\n                        submitted &&\r\n                        f.firstName.errors &&\r\n                        f.firstName.errors.required\r\n                    }\"\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    id=\"firstName\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"lastName\" class=\"col-form-label\">Last Name</label>\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\">\r\n                      <i class=\"ti-user\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    formControlName=\"lastName\"\r\n                    [ngClass]=\"{\r\n                      'form-control-invalid':\r\n                        submitted &&\r\n                        f.lastName.errors &&\r\n                        f.lastName.errors.required\r\n                    }\"\r\n                    class=\"form-control\"\r\n                    id=\"lastName\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label class=\"col-form-label\">Avatar</label>\r\n                <div class=\"d-flex align-items-center\">\r\n                  <div>\r\n                    <figure class=\"avatar mr-3 item-rtl\">\r\n                      <img *ngIf=\"profileImagePath\"\r\n                        [src]=\"profileImagePath\"\r\n                        class=\"rounded-circle\"\r\n                      />\r\n                    </figure>\r\n                  </div>\r\n                  <div class=\"custom-file\">\r\n                    <input\r\n                      type=\"file\"\r\n                      class=\"custom-file-input\"\r\n                      id=\"customFile\"\r\n                      (change)=\"selectImage($event)\"\r\n                    />\r\n                    <label class=\"custom-file-label\" for=\"customFile\"\r\n                      >Choose file</label\r\n                    >\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"website\" class=\"col-form-label\">Website</label>\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\">\r\n                      <i class=\"ti-link\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"website\"\r\n                    id=\"website\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"phone\" class=\"col-form-label\">Phone</label>\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\">\r\n                      <i class=\"ti-mobile\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"mobile\"\r\n                    id=\"phone\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"tab-pane\" id=\"about\" role=\"tabpanel\">\r\n              <div class=\"form-group\">\r\n                <label for=\"website\" class=\"col-form-label\">City</label>\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\">\r\n                      <i class=\"ti-map-alt\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    formControlName=\"city\"\r\n                    class=\"form-control\"\r\n                    id=\"website\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"website\" class=\"col-form-label\">State</label>\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\">\r\n                      <i class=\"ti-map-alt\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    formControlName=\"state\"\r\n                    class=\"form-control\"\r\n                    id=\"website\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"website\" class=\"col-form-label\">Country</label>\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\">\r\n                      <i class=\"ti-map-alt\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    formControlName=\"country\"\r\n                    class=\"form-control\"\r\n                    id=\"website\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"about-text\" class=\"col-form-label\"\r\n                  >Write a few words that describe you</label\r\n                >\r\n                <textarea class=\"form-control\" formControlName=\"bio\" id=\"about-text\"></textarea>\r\n              </div>\r\n            </div>\r\n            <div class=\"tab-pane\" id=\"social-links\" role=\"tabpanel\">\r\n              <div class=\"form-group\">\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text bg-facebook\">\r\n                      <i class=\"ti-facebook\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"facebookProfileUrl\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text bg-twitter\">\r\n                      <i class=\"ti-twitter\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"twitterProfileUrl\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text bg-instagram\">\r\n                      <i class=\"ti-instagram\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"instagramProfileUrl\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text bg-linkedin\">\r\n                      <i class=\"ti-linkedin\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"linkedInProfileUrl\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text bg-dribbble\">\r\n                      <i class=\"ti-dribbble\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"dribbleProfileUrl\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text bg-google\">\r\n                      <i class=\"ti-google\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    formControlName=\"googlePlusProfileUrl\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" (click)=\"submit()\" class=\"btn btn-primary\">{{button_text}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- ./ edit profile modal -->\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  ElementRef,\r\n  ViewChild,\r\n  TemplateRef\r\n} from \"@angular/core\";\r\nimport { Toppy, RelativePosition, OutsidePlacement } from \"toppy\";\r\nimport { UserService } from \"src/app/services/user.service\";\r\nimport { FormBuilder, Validators } from \"@angular/forms\";\r\nimport { ChatService } from \"src/app/services/chat.service\";\r\n\r\n@Component({\r\n  selector: \"app-new-group-model\",\r\n  templateUrl: \"./new-group-model.component.html\",\r\n  styleUrls: [\"./new-group-model.component.scss\"]\r\n})\r\nexport class NewGroupModelComponent implements OnInit {\r\n  @ViewChild(\"tpl\", { static: true }) tpl: TemplateRef<any>;\r\n  overlay;\r\n  @ViewChild(\"el\", { static: true })\r\n  el: ElementRef;\r\n  filteredUsers = [];\r\n  users = [];\r\n  selectedUsers = [];\r\n  form: any;\r\n  message: string;\r\n  submitted: boolean;\r\n\r\n  constructor(\r\n    private _toppy: Toppy,\r\n    private userService: UserService,\r\n    private formBuilder: FormBuilder,\r\n    private chatService: ChatService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.form = this.formBuilder.group({\r\n      groupName: [\"\", Validators.required],\r\n      description: [\"\", Validators.required]\r\n    });\r\n\r\n    const position = new RelativePosition({\r\n      placement: OutsidePlacement.BOTTOM_LEFT,\r\n      src: this.el.nativeElement\r\n    });\r\n\r\n    this.overlay = this._toppy\r\n      .position(position)\r\n      .content(this.tpl) // template ref\r\n      .create();\r\n    this.fetchAllUsers();\r\n  }\r\n  get f() {\r\n    return this.form.controls;\r\n  }\r\n\r\n  fetchAllUsers() {\r\n    this.userService.activeUsers.subscribe(res => {\r\n      this.users = res;\r\n      this.filteredUsers = res;\r\n    });\r\n  }\r\n\r\n  inputChange() {\r\n    this.filteredUsers = this.users.filter(u => {\r\n      return (\r\n        (u.firstName + \" \" + u.lastName)\r\n          .toUpperCase()\r\n          .includes(this.el.nativeElement.value.toUpperCase()) &&\r\n        !this.selectedUsers.some(s => s.userId == u.userId)\r\n      );\r\n    });\r\n  }\r\n  submit() {\r\n    this.message = \"\";\r\n    this.submitted = true;\r\n\r\n    // stop here if form is invalid\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n    if (!this.selectedUsers.length) {\r\n      this.message = \"Please Add Users\";\r\n      return;\r\n    }\r\n    let data = {\r\n      groupName: this.form.value.groupName,\r\n      description: this.form.value.description,\r\n      users: this.selectedUsers.map(u => u.userId)\r\n    };\r\n    this.chatService.createGroup(data).subscribe(res => {\r\n    });\r\n  }\r\n\r\n  addUser(user) {\r\n    if (!this.selectedUsers.filter(v => v.userId == user.userId).length) {\r\n      this.selectedUsers.push(user);\r\n      this.message = \"\";\r\n    }\r\n    setTimeout(() => {\r\n      window[\"$\"]('[data-toggle=\"tooltip\"]').tooltip();\r\n    });\r\n  }\r\n\r\n  open() {\r\n    this.inputChange();\r\n    this.overlay.open();\r\n  }\r\n  removeUser(user) {\r\n    this.selectedUsers.splice(\r\n      this.selectedUsers.findIndex(function(i) {\r\n        return i.userId === user.userId;\r\n      }),\r\n      1\r\n    );\r\n  }\r\n\r\n  close() {\r\n    setTimeout(() => {\r\n      this.overlay.close();\r\n    }, 200);\r\n  }\r\n}\r\n","<!-- new group modal -->\r\n<div\r\n  class=\"modal fade\"\r\n  id=\"newGroup\"\r\n  tabindex=\"-1\"\r\n  role=\"dialog\"\r\n  aria-labelledby=\"exampleModalLabel\"\r\n  aria-hidden=\"true\"\r\n>\r\n  <div\r\n    class=\"modal-dialog modal-dialog-centered modal-dialog-zoom\"\r\n    role=\"document\"\r\n  >\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\"><i class=\"fa fa-users\"></i> New Group</h5>\r\n        <button\r\n          type=\"button\"\r\n          class=\"close\"\r\n          data-dismiss=\"modal\"\r\n          aria-label=\"Close\"\r\n        >\r\n          <i class=\"ti-close\"></i>\r\n        </button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <form [formGroup]=\"form\">\r\n          <div class=\"form-group\">\r\n            <label for=\"group_name\" class=\"col-form-label\">Group name</label>\r\n            <input\r\n              type=\"text\"\r\n              formControlName=\"groupName\"\r\n              [ngClass]=\"{\r\n                'form-control-invalid':\r\n                  submitted && f.groupName.errors && f.groupName.errors.required\r\n              }\"\r\n              class=\"form-control\"\r\n              id=\"group_name\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group dropdown\">\r\n            <label for=\"users\" class=\"col-form-label\">Users</label>\r\n            <input\r\n              #el\r\n              (click)=\"open()\"\r\n              (blur)=\"close()\"\r\n              (input)=\"inputChange()\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"users\"\r\n              placeholder=\"Find user\"\r\n            />\r\n            <p class=\"text-danger\">{{ message }}</p>\r\n            <ng-template #tpl>\r\n              <div class=\"user-list-container\">\r\n                <ul class=\"list-group list-group-flush\">\r\n                  <li\r\n                    (click)=\"addUser(user)\"\r\n                    *ngFor=\"let user of filteredUsers\"\r\n                    class=\"list-group-item open-chat\"\r\n                  >\r\n                    <div (click)=\"addUser(user)\">\r\n                      <figure class=\"avatar\">\r\n                        <img\r\n                          class=\"rounded-circle\"\r\n                          [src]=\"user.profileImagePath\"\r\n                        />\r\n                      </figure>\r\n                    </div>\r\n                    <div class=\"users-list-body\">\r\n                      <p class=\"title\">\r\n                        {{ user.firstName + \" \" + user.lastName }}\r\n                      </p>\r\n                      <p class=\"email\">\r\n                        {{ user.email }}\r\n                      </p>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </ng-template>\r\n          </div>\r\n          <div *ngIf=\"selectedUsers.length\" class=\"form-group\">\r\n            <div class=\"avatar-group\">\r\n              <figure\r\n                *ngFor=\"let user of selectedUsers\"\r\n                data-toggle=\"tooltip\"\r\n                data-placement=\"bottom\"\r\n                data-html=\"true\"\r\n                title=\"{{\r\n                  user.firstName + ' ' + user.lastName\r\n                }} </br> Click to remove\"\r\n                class=\"avatar\"\r\n                (click)=\"removeUser(user)\"\r\n              >\r\n                <img [src]=\"user.profileImagePath\" class=\"rounded-circle\" />\r\n              </figure>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"description\" class=\"col-form-label\">Description</label>\r\n            <textarea\r\n              class=\"form-control\"\r\n              formControlName=\"description\"\r\n              [ngClass]=\"{\r\n                'form-control-invalid':\r\n                  submitted &&\r\n                  f.description.errors &&\r\n                  f.description.errors.required\r\n              }\"\r\n              class=\"form-control\"\r\n              id=\"group_name\"\r\n              id=\"description\"\r\n            ></textarea>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" (click)=\"submit()\" class=\"btn btn-primary\">\r\n          Create Group\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- ./ new group modal -->\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-settings-model',\r\n  templateUrl: './settings-model.component.html',\r\n  styleUrls: ['./settings-model.component.scss']\r\n})\r\nexport class SettingsModelComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","\r\n<!-- setting modal -->\r\n<div class=\"modal fade\" id=\"settingModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-zoom\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">\r\n                    <i class=\"ti-settings\"></i> Settings\r\n                </h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <i class=\"ti-close\"></i>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <ul class=\"nav nav-tabs\" role=\"tablist\">\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link active\" data-toggle=\"tab\" href=\"#account\" role=\"tab\" aria-controls=\"account\"\r\n                            aria-selected=\"true\">Account</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link\" data-toggle=\"tab\" href=\"#notification\" role=\"tab\"\r\n                            aria-controls=\"notification\" aria-selected=\"false\">Notification</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link\" data-toggle=\"tab\" href=\"#contact\" role=\"tab\" aria-controls=\"contact\"\r\n                            aria-selected=\"false\">Security</a>\r\n                    </li>\r\n                </ul>\r\n                <div class=\"tab-content\">\r\n                    <div class=\"tab-pane show active\" id=\"account\" role=\"tabpanel\">\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" checked id=\"customSwitch1\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch1\">Allow connected contacts</label>\r\n                        </div>\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" checked id=\"customSwitch2\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch2\">Confirm message requests</label>\r\n                        </div>\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" checked id=\"customSwitch3\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch3\">Profile privacy</label>\r\n                        </div>\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" id=\"customSwitch4\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch4\">Developer mode options</label>\r\n                        </div>\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" checked id=\"customSwitch5\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch5\">Two-step security\r\n                                verification</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"tab-pane\" id=\"notification\" role=\"tabpanel\">\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" checked id=\"customSwitch6\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch6\">Allow mobile notifications</label>\r\n                        </div>\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" id=\"customSwitch7\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch7\">Notifications from your\r\n                                friends</label>\r\n                        </div>\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" id=\"customSwitch8\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch8\">Send notifications by email</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"tab-pane\" id=\"contact\" role=\"tabpanel\">\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" id=\"customSwitch9\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch9\">Suggest changing passwords every\r\n                                month.</label>\r\n                        </div>\r\n                        <div class=\"form-item custom-control custom-switch\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" checked id=\"customSwitch10\">\r\n                            <label class=\"custom-control-label\" for=\"customSwitch10\">Let me know about suspicious\r\n                                entries to your account</label>\r\n                        </div>\r\n                        <div class=\"form-item\">\r\n                            <p>\r\n                                <a data-toggle=\"collapse\" href=\"#collapseExample\" role=\"button\" aria-expanded=\"false\"\r\n                                    aria-controls=\"collapseExample\">\r\n                                    <span class=\"ti-plus btn-icon\"></span> Security Questions\r\n                                </a>\r\n                            </p>\r\n                            <div class=\"collapse\" id=\"collapseExample\">\r\n                                <div class=\"form-group\">\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"Question 1\">\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"Question 2\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-primary\">Save</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- ./ setting modal -->","import { Component, OnInit } from \"@angular/core\";\r\nimport { UserService } from \"src/app/services/user.service\";\r\nimport { ChatService } from \"src/app/services/chat.service\";\r\nimport { MessageType } from \"src/app/models/message\";\r\n\r\n@Component({\r\n  selector: \"app-profile-panel\",\r\n  templateUrl: \"./profile-panel.component.html\",\r\n  styleUrls: [\"./profile-panel.component.scss\"],\r\n})\r\nexport class ProfilePanelComponent implements OnInit {\r\n  user;\r\n  activeUser;\r\n  query=\"\";\r\n  files = [];\r\n  constructor(\r\n    private chatService: ChatService,\r\n    private userService: UserService\r\n  ) {\r\n    this.userService.userSubject.subscribe((user) => {\r\n      this.user = user;\r\n    });\r\n    this.chatService.activeUserSubject.subscribe((user) => {\r\n      this.activeUser = user;\r\n      this.query=\"\";\r\n      this.queryChange();\r\n    });\r\n    this.chatService.activeMessages.subscribe((messages) => {\r\n      if (!messages) messages = [];\r\n      this.files = [];\r\n      messages.forEach((msg) => {\r\n        if (\r\n          msg.type == MessageType.File ||\r\n          msg.type == MessageType.Video ||\r\n          msg.type == MessageType.Image\r\n        ) {\r\n          this.files.push({\r\n            name: msg.content.split(\"/\").slice(-1).pop(),\r\n            id: msg.timeStamp.valueOf().toString(),\r\n            type: msg.type,\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  queryChange(){\r\n    this.chatService.updateSearchQuery(this.query);\r\n  }\r\n\r\n  getFileName(msg) {\r\n    return msg.content.split(\"/\").slice(-1).pop();\r\n  }\r\n\r\n  handleFileClick(id) {\r\n    var el = document.getElementById(id);\r\n    if (el) {\r\n      el.scrollIntoView();\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n}\r\n","<div *ngIf=\"activeUser\" class=\"col-md-12 col-xs-12 p-l-r-0 chat-user-details\">\r\n    <div class=\"col-md-6 col-md-offset-3 col-xs-6 col-xs-offset-3 user-img\">\r\n        <img [src]=\"activeUser.profileImagePath\" />\r\n        <span class=\"user-status available\"></span>\r\n        <span class=\"user-status\" [ngClass]=\"{ available: activeUser.online, busy: !activeUser.online }\"></span>\r\n    </div>\r\n    <div class=\"col-md-12 col-xs-12\">\r\n        <h4>\r\n            {{ activeUser.firstName + \" \" + activeUser.lastName }}\r\n        </h4>\r\n        <span class=\"status available-status-details\">{{\r\n      activeUser.online ? \"Active Now\" : \"Offline\"\r\n    }}</span>\r\n    </div>\r\n    <div class=\"col-md-12 col-xs-12 p-l-r-0 chat-user-option m-t-25\">\r\n        <h5>Options</h5>\r\n        <ul>\r\n            <li>\r\n                <!-- <a href=\"javascript:void(0);\" class=\"search\">\r\n          Search in Conversation\r\n        </a> -->\r\n                <input type=\"text\" [(ngModel)]=\"query\" (keydown)=\"queryChange()\" placeholder=\"Search in Conversation\" />\r\n            </li>\r\n            <li>\r\n                <a href=\"javascript:void(0);\" class=\"starred\">\r\n          Starred Message\r\n        </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class=\"col-md-12 col-xs-12 p-l-r-0 chat-user-option\">\r\n        <h5>Shared Files</h5>\r\n        <p *ngIf=\"files?.length == 0\">No file Shared</p>\r\n        <ul>\r\n            <li *ngFor=\"let file of files\" (click)=\"handleFileClick(file.id)\">\r\n                <a href=\"javascript:void(0);\" class=\"doc\">\r\n          {{ file.name }}\r\n        </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","import { Component, OnInit, OnDestroy } from \"@angular/core\";\r\nimport { Router } from \"@angular/router\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { AuthService } from 'src/app/services/auth.service';\r\n\r\n@Component({\r\n  selector: \"app-register\",\r\n  templateUrl: \"./register.component.html\",\r\n  styleUrls: [\"./register.component.scss\"]\r\n})\r\nexport class RegisterComponent implements OnInit, OnDestroy {\r\n  registerForm: FormGroup;\r\n  submitted = false;\r\n  message: string = \"\";\r\n  waitingResponse=false;\r\n  constructor(\r\n    private router: Router,\r\n    private formBuilder: FormBuilder,\r\n    private authService: AuthService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    document.getElementsByTagName(\"body\")[0].classList.add(\"form-membership\");\r\n    this.registerForm = this.formBuilder.group({\r\n      firstName: [\"\", Validators.required],\r\n      lastName: [\"\", Validators.required],\r\n      email: [\"\", [Validators.required, Validators.email]],\r\n      password: [\"\", [Validators.required, Validators.minLength(6)]]\r\n    });\r\n  }\r\n  register() {\r\n    this.message = \"\";\r\n    this.submitted = true;\r\n\r\n    // stop here if form is invalid\r\n    if (this.registerForm.invalid) {\r\n      return;\r\n    }\r\n    this.waitingResponse=true;\r\n    this.authService.register(this.registerForm.value)\r\n      .subscribe((res: any) => {\r\n        this.waitingResponse=false;\r\n        if (res) {\r\n          this.router.navigate([\"home\"]);\r\n        } else {\r\n          this.message = \"User Already Exists\";\r\n        }\r\n      });\r\n  }\r\n  // convenience getter for easy access to form fields\r\n  get f() {\r\n    return this.registerForm.controls;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    document\r\n      .getElementsByTagName(\"body\")[0]\r\n      .classList.remove(\"form-membership\");\r\n  }\r\n}\r\n","<div class=\"col-md-7 hidden-xs user-auth-static\"></div>\r\n<div class=\"col-md-5 col-md-offset-7 col-xs-12 user-auth-form-container\">\r\n    <form [formGroup]=\"registerForm\">\r\n        <div class=\"col-dm-12 col-xs-12 user-auth-form\">\r\n            <div class=\"col-xs-12\">\r\n                <h3>\r\n                    Hey Ambrose! Please Register Your Account!\r\n                </h3>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12 p-l-r-0\">\r\n                <div class=\"col-md-5 col-xs-6\">\r\n                    <a href=\"javascript:void(0);\" class=\"btn social-login fb\">\r\n            Facebook\r\n          </a>\r\n                </div>\r\n                <div class=\"col-md-5 col-xs-6\">\r\n                    <a href=\"javascript:void(0);\" class=\"btn social-login tw\">\r\n            Twitter\r\n          </a>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12 m-t-50\">\r\n                <span class=\"seprator\">\r\n          <span class=\"seprator-content\">OR</span>\r\n                </span>\r\n            </div>\r\n            <div class=\"col-md-9 m-t-10\" *ngIf=\"message !== ''\">\r\n                <div class=\"alert alert-danger\">\r\n                    <strong>Failure!</strong> {{ message }}\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-9 col-xs-12 field-container\">\r\n                <div class=\"field\">\r\n                    <input formControlName=\"firstName\" type=\"text\" placeholder=\"First name\" name=\"firstName\" id=\"firstName\" required [ngClass]=\"{\r\n              'form-control-invalid':\r\n                submitted && f.firstName.errors && f.firstName.errors.required\r\n            }\" />\r\n                    <label for=\"firstName\">First Name</label>\r\n                </div>\r\n\r\n                <div class=\"field\">\r\n                    <input formControlName=\"lastName\" type=\"text\" [ngClass]=\"{\r\n              'form-control-invalid':\r\n                submitted && f.lastName.errors && f.lastName.errors.required\r\n            }\" placeholder=\"Lastname\" placeholder=\"Last Name\" id=\"lastName\" required />\r\n                    <label for=\"lastName\">Last Name</label>\r\n                </div>\r\n\r\n                <div class=\"field\">\r\n                    <input formControlName=\"email\" type=\"email\" [ngClass]=\"{\r\n              'form-control-invalid':\r\n                submitted &&\r\n                f.email.errors &&\r\n                (f.email.errors.required || f.email.errors.email)\r\n            }\" placeholder=\"Email\" required name=\"email\" id=\"email\" placeholder=\"jane.appleseed@example.com\" />\r\n                    <label for=\"email\">Email Address</label>\r\n                </div>\r\n\r\n                <div class=\"field\">\r\n                    <input formControlName=\"password\" type=\"password\" placeholder=\"Password\" [ngClass]=\"{\r\n              'form-control-invalid':\r\n                submitted &&\r\n                f.password.errors &&\r\n                (f.password.errors.required || f.password.errors.minlength)\r\n            }\" required name=\"password\" id=\"password\" placeholder=\"********\" />\r\n                    <label for=\"password\">Password</label>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"waitingResponse\" class=\"progress-bar\">\r\n                <div class=\"progress-bar-value\"></div>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12\">\r\n                <svg class=\"spinner\" *ngIf=\"waitingResponse\" width=\"40px\" height=\"40px\" viewBox=\"0 0 66 66\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <circle class=\"path\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\" cx=\"33\" cy=\"33\" r=\"30\"></circle>\r\n         </svg>\r\n                <a class=\"btn auth-btn active-screen\" *ngIf=\"!waitingResponse\" (click)=\"register()\" href=\"javascript:void(0)\">\r\n          Sign Up\r\n        </a>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12 m-t-15\">\r\n                <p class=\"redirect\">\r\n                    Already have an account? <a routerLink=\"/login\">Sign in!</a>\r\n                </p>\r\n            </div>\r\n            <div class=\"col-md-12 col-xs-12 m-t-20\">\r\n                <ul class=\"footer-link\">\r\n                    <li>\r\n                        <a href=\"javascript:void(0);\">\r\n              Terms and Conditions\r\n            </a>\r\n                    </li>\r\n                    <li>\r\n                        <a href=\"javascript:void(0);\">\r\n              Privacy Policy\r\n            </a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>","import { Component, OnInit } from \"@angular/core\";\r\nimport { UserService } from \"src/app/services/user.service\";\r\n\r\n@Component({\r\n  selector: \"[app-right-panel]\",\r\n  templateUrl: \"./right-panel.component.html\",\r\n  styleUrls: [\"./right-panel.component.scss\"],\r\n})\r\nexport class RightPanelComponent implements OnInit {\r\n  user;\r\n  constructor(private userService: UserService) {\r\n    this.userService.userSubject.subscribe((user) => {\r\n      this.user = user;\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n}\r\n","<div class=\"col-md-12 col-xs-12 profile-panel-header\">\r\n    <div class=\"col-lg-3 col-lg-offset-1 col-md-3 col-xs-3 col-xs-offset-2 img-container\">\r\n        <img [src]=\"user?.profileImagePath\" />\r\n    </div>\r\n    <div class=\"col-lg-7 col-md-8 col-md-offset-1 col-xs-5 p-l-0\">\r\n        <button type=\"button\" class=\"btn dropdown-toggle name\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n      {{ user.firstName + \" \" + user.lastName }}<span class=\"caret\"></span>\r\n    </button>\r\n        <ul class=\"dropdown-menu\">\r\n            <li><a href=\"#\">Settings</a></li>\r\n            <li><a [routerLink]=\"['/login']\">Logout</a></li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n<app-incoming-call></app-incoming-call>\r\n<app-min-call-window></app-min-call-window>\r\n<app-profile-panel></app-profile-panel>","import { Component, OnInit } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-side-menu\",\r\n  templateUrl: \"./side-menu.component.html\",\r\n  styleUrls: [\"./side-menu.component.scss\"]\r\n})\r\nexport class SideMenuComponent implements OnInit {\r\n  rightSwipe = false;\r\n  constructor() {}\r\n\r\n  ngOnInit() {\r\n    document.addEventListener(\"swiped-right\", e => {\r\n      this.rightSwipe = true;\r\n    });\r\n    document.addEventListener(\"swiped-left\", e => {\r\n      this.rightSwipe = false;\r\n    });\r\n  }\r\n\r\n  get isMobile() {\r\n    return window[\"jQuery\"].browser.mobile;\r\n  }\r\n}\r\n","<!-- navigation -->\r\n<!-- <nav class=\"navigation\">\r\n  <div class=\"nav-group\" [ngClass]=\"{ 'd-none': isMobile && !rightSwipe }\">\r\n    <ul>\r\n      <li>\r\n        <a class=\"logo\">\r\n          <svg\r\n            version=\"1.1\"\r\n            id=\"Capa_1\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n            x=\"0px\"\r\n            y=\"0px\"\r\n            width=\"33.004px\"\r\n            height=\"33.003px\"\r\n            viewBox=\"0 0 33.004 33.003\"\r\n            style=\"enable-background:new 0 0 33.004 33.003;\"\r\n            xml:space=\"preserve\"\r\n          >\r\n            <g>\r\n              <path\r\n                d=\"M4.393,4.788c-5.857,5.857-5.858,15.354,0,21.213c4.875,4.875,12.271,5.688,17.994,2.447l10.617,4.161l-4.857-9.998\r\n                                c3.133-5.697,2.289-12.996-2.539-17.824C19.748-1.072,10.25-1.07,4.393,4.788z M25.317,22.149l0.261,0.512l1.092,2.142l0.006,0.01\r\n                                l1.717,3.536l-3.748-1.47l-0.037-0.015l-2.352-0.883l-0.582-0.219c-4.773,3.076-11.221,2.526-15.394-1.646\r\n                                C1.469,19.305,1.469,11.481,6.277,6.672c4.81-4.809,12.634-4.809,17.443,0.001C27.919,10.872,28.451,17.368,25.317,22.149z\"\r\n              />\r\n              <g>\r\n                <circle cx=\"9.835\" cy=\"16.043\" r=\"1.833\" />\r\n                <circle cx=\"15.502\" cy=\"16.043\" r=\"1.833\" />\r\n                <circle cx=\"21.168\" cy=\"16.043\" r=\"1.833\" />\r\n              </g>\r\n            </g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n            <g></g>\r\n          </svg>\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a data-navigation-target=\"chats\" class=\"active\">\r\n          <i class=\"ti-comment-alt\"></i>\r\n        </a>\r\n      </li>\r\n      <li data-navigation-target=\"favorites\" class=\"brackets\">\r\n        <a>\r\n          <i class=\"ti-star\"></i>\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a data-toggle=\"modal\" data-target=\"#editProfileModal\">\r\n          <i class=\"ti-pencil\"></i>\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a data-toggle=\"modal\" data-target=\"#settingModal\">\r\n          <i class=\"ti-settings\"></i>\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a routerLink=\"/login\">\r\n          <i class=\"ti-power-off\"></i>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</nav> -->\r\n<!-- ./ navigation -->\r\n\r\n<div class=\"col-md-1 col-sm-3 col-xs-3 left-profile-panel\">\r\n  <div class=\"col-md-12 profile-pic\">\r\n      <span class=\"profile-status available\"></span>\r\n      <img src=\"assets/img/user.jfif \">\r\n      <div class=\"col-md-12 p-l-r-0\">\r\n          <button type=\"button\" class=\"btn btn-default dropdown-toggle status-change available-status\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n              Online <span class=\"caret\"></span>\r\n            </button>\r\n          <ul class=\"dropdown-menu status-dropdown\">\r\n              <li><a href=\"#\">Online</a></li>\r\n              <li><a href=\"#\">Busy</a></li>\r\n              <li><a href=\"#\">Idle</a></li>\r\n          </ul>\r\n      </div>\r\n      <div class=\"col-md-12 p-l-r-0 m-t-100\">\r\n          <ul class=\"profile-option\">\r\n              <li>\r\n                  <span class=\"glyphicon glyphicon-home\" aria-hidden=\"true\"></span>\r\n                  <span class=\"notification-lit\"></span>\r\n              </li>\r\n              <li>\r\n                  <span class=\"glyphicon glyphicon-send\" aria-hidden=\"true\"></span>\r\n              </li>\r\n              <li>\r\n                  <span class=\"glyphicon glyphicon-inbox\" aria-hidden=\"true\"></span>\r\n              </li>\r\n              <li>\r\n                  <span class=\"glyphicon glyphicon-user\" aria-hidden=\"true\"></span>\r\n                  <span class=\"notification-lit\"></span>\r\n              </li>\r\n              <li>\r\n                  <span class=\"glyphicon glyphicon-bell\" aria-hidden=\"true\"></span>\r\n              </li>\r\n          </ul>\r\n      </div>\r\n      <div class=\"col-md-12 p-l-r-0 profile-setting\">\r\n          <span class=\"glyphicon glyphicon-cog\" aria-hidden=\"true\"></span>\r\n      </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from \"@angular/core\";\r\nimport { ChatService } from \"src/app/services/chat.service\";\r\nimport { UserService } from \"src/app/services/user.service\";\r\n\r\n@Component({\r\n  selector: \"[app-user-info]\",\r\n  templateUrl: \"./user-info.component.html\",\r\n  styleUrls: [\"./user-info.component.scss\"]\r\n})\r\nexport class UserInfoComponent implements OnInit {\r\n  user;\r\n  opened = false;\r\n  constructor(private userService: UserService) {\r\n    this.userService.openProfile.subscribe(user => {\r\n      if (user) {\r\n        this.user = user;\r\n        this.opened = true;\r\n        document.getElementById(\"user-info\").classList.add(\"mobile-open\");\r\n      }\r\n    });\r\n  }\r\n\r\n  closeSidebar() {\r\n    this.opened = false;\r\n    document.getElementById(\"user-info\").classList.remove(\"mobile-open\");\r\n  }\r\n\r\n  ngOnInit() {}\r\n}\r\n","<div\r\n  id=\"contact-information\"\r\n  *ngIf=\"user\"\r\n  class=\"sidebar\"\r\n  [ngClass]=\"{ active: opened }\"\r\n>\r\n  <header>\r\n    <span>About</span>\r\n    <ul class=\"list-inline\">\r\n      <li (click)=\"closeSidebar()\" class=\"list-inline-item\">\r\n        <a class=\"btn btn-light sidebar-close\">\r\n          <i class=\"ti-close\"></i>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </header>\r\n  <div class=\"sidebar-body\">\r\n    <div class=\"pl-4 pr-4 text-center\">\r\n      <figure\r\n        [ngClass]=\"{\r\n          'avatar-state-success': user.online,\r\n          'avatar-state-danger': !user.online\r\n        }\"\r\n        class=\"avatar avatar-xl mb-4\"\r\n      >\r\n        <img [src]=\"user.profileImagePath\" class=\"rounded-circle\" />\r\n      </figure>\r\n      <h5 class=\"text-primary\">{{ user.firstName + \" \" + user.lastName }}</h5>\r\n      <p class=\"text-muted\">{{ user.online ? \"Online\" : \"Offline\" }}</p>\r\n    </div>\r\n    <hr *ngIf=\"user.bio\" />\r\n    <div *ngIf=\"user.bio\" class=\"pl-4 pr-4\">\r\n      <h6>About</h6>\r\n      <p class=\"text-muted\">\r\n        {{ user.bio }}\r\n      </p>\r\n    </div>\r\n    <hr *ngIf=\"user.mobile\" />\r\n    <div *ngIf=\"user.mobile\" class=\"pl-4 pr-4\">\r\n      <h6>Phone</h6>\r\n      <p class=\"text-muted\">{{ user.mobile }}</p>\r\n    </div>\r\n    <hr *ngIf=\"user.city || user.state || user.country\" />\r\n    <div *ngIf=\"user.city || user.state || user.country\" class=\"pl-4 pr-4\">\r\n      <h6>Address</h6>\r\n      <p class=\"text-muted\">\r\n        {{\r\n          user.city ? user.city + (user.state || user.country ? \",\" : \"\") : \"\"\r\n        }}\r\n        {{ user.state ? user.state + (user.country ? \",\" : \"\") : \"\" }}\r\n        {{ user.country ? user.country : \"\" }}\r\n      </p>\r\n    </div>\r\n    <hr *ngIf=\"user.website\" />\r\n    <div *ngIf=\"user.website\" class=\"pl-4 pr-4\">\r\n      <h6>Website</h6>\r\n      <p>\r\n        <a [href]=\"user.website\" target=\"_blank\">{{ user.website }}</a>\r\n      </p>\r\n    </div>\r\n    <hr\r\n      *ngIf=\"\r\n        user.dribbleProfileUrl ||\r\n        user.facebookProfileUrl ||\r\n        user.googlePlusProfileUrl ||\r\n        user.instagramProfileUrl ||\r\n        user.linkedInProfileUrl ||\r\n        user.twitterProfileUrl\r\n      \"\r\n    />\r\n    <div\r\n      *ngIf=\"\r\n        user.dribbleProfileUrl ||\r\n        user.facebookProfileUrl ||\r\n        user.googlePlusProfileUrl ||\r\n        user.instagramProfileUrl ||\r\n        user.linkedInProfileUrl ||\r\n        user.twitterProfileUrl\r\n      \"\r\n      class=\"pl-4 pr-4\"\r\n    >\r\n      <h6>Social Links</h6>\r\n      <ul class=\"list-inline social-links\">\r\n        <li *ngIf=\"user.facebookProfileUrl\" class=\"list-inline-item\">\r\n          <a\r\n            [href]=\"user.facebookProfileUrl\"\r\n            target=\"_blank\"\r\n            class=\"btn btn-sm btn-floating btn-facebook\"\r\n          >\r\n            <i class=\"fa fa-facebook\"></i>\r\n          </a>\r\n        </li>\r\n        <li *ngIf=\"user.twitterProfileUrl\" class=\"list-inline-item\">\r\n          <a\r\n            [href]=\"user.twitterProfileUrl\"\r\n            target=\"_blank\"\r\n            class=\"btn btn-sm btn-floating btn-twitter\"\r\n          >\r\n            <i class=\"fa fa-twitter\"></i>\r\n          </a>\r\n        </li>\r\n        <li *ngIf=\"user.dribbleProfileUrl\" class=\"list-inline-item\">\r\n          <a\r\n            [href]=\"user.dribbleProfileUrl\"\r\n            target=\"_blank\"\r\n            class=\"btn btn-sm btn-floating btn-dribbble\"\r\n          >\r\n            <i class=\"fa fa-dribbble\"></i>\r\n          </a>\r\n        </li>\r\n        <li *ngIf=\"user.linkedInProfileUrl\" class=\"list-inline-item\">\r\n          <a\r\n            [href]=\"user.linkedInProfileUrl\"\r\n            target=\"_blank\"\r\n            class=\"btn btn-sm btn-floating btn-linkedin\"\r\n          >\r\n            <i class=\"fa fa-linkedin\"></i>\r\n          </a>\r\n        </li>\r\n        <li *ngIf=\"user.googlePlusProfileUrl\" class=\"list-inline-item\">\r\n          <a\r\n            [href]=\"user.googlePlusProfileUrl\"\r\n            target=\"_blank\"\r\n            class=\"btn btn-sm btn-floating btn-google\"\r\n          >\r\n            <i class=\"fa fa-google\"></i>\r\n          </a>\r\n        </li>\r\n        <li *ngIf=\"user.instagramProfileUrl\" class=\"list-inline-item\">\r\n          <a\r\n            [href]=\"user.instagramProfileUrl\"\r\n            target=\"_blank\"\r\n            class=\"btn btn-sm btn-floating btn-instagram\"\r\n          >\r\n            <i class=\"fa fa-instagram\"></i>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n\r\n    <!-- <hr /><div class=\"pl-4 pr-4\">\r\n      <div class=\"form-group\">\r\n        <div class=\"form-item custom-control custom-switch\">\r\n          <input\r\n            type=\"checkbox\"\r\n            class=\"custom-control-input\"\r\n            id=\"customSwitch11\"\r\n          />\r\n          <label class=\"custom-control-label\" for=\"customSwitch11\">Block</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <div class=\"form-item custom-control custom-switch\">\r\n          <input\r\n            type=\"checkbox\"\r\n            class=\"custom-control-input\"\r\n            checked=\"\"\r\n            id=\"customSwitch12\"\r\n          />\r\n          <label class=\"custom-control-label\" for=\"customSwitch12\">Mute</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <div class=\"form-item custom-control custom-switch\">\r\n          <input\r\n            type=\"checkbox\"\r\n            class=\"custom-control-input\"\r\n            id=\"customSwitch13\"\r\n          />\r\n          <label class=\"custom-control-label\" for=\"customSwitch13\"\r\n            >Get notification</label\r\n          >\r\n        </div>\r\n      </div>\r\n    </div> -->\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-user-profile-image',\r\n  templateUrl: './user-profile-image.component.html',\r\n  styleUrls: ['./user-profile-image.component.scss']\r\n})\r\nexport class UserProfileImageComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>user-profile-image works!</p>\r\n","import { Injectable } from \"@angular/core\";\r\nimport {\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  CanActivate,\r\n  Router\r\n} from \"@angular/router\";\r\nimport { Observable } from 'rxjs';\r\nimport { AuthService } from '../services/auth.service';\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(private authService: AuthService, private router: Router) {}\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<boolean> | Promise<boolean> | boolean {\r\n    return this.authService.isLoggedIn();\r\n  }\r\n}\r\n","export class PeerConnection {\r\n  id: string = \"null\";\r\n  pc: any;\r\n  sender;\r\n  track;\r\n  stream;\r\n  processPeerStream;\r\n  constructor(id: string, track, stream, sender, processPeerStream) {\r\n    this.id = id;\r\n    this.track = track;\r\n    this.stream = stream;\r\n    this.sender = sender;\r\n    this.processPeerStream = processPeerStream;\r\n  }\r\n  static getPeerConnectionConfig() {\r\n    return {\r\n      iceServers: [\r\n        {\r\n          urls: \"stun:stun.l.google.com:19302\",\r\n        },\r\n      ],\r\n    };\r\n  }\r\n  initialize = function () {\r\n    this.createPeerConnection();\r\n  };\r\n  closeConnection() {\r\n    if (this.track) this.track.stop();\r\n    this.pc.close();\r\n  }\r\n  processSignal = function (signal: PeerConnectionSignal) {\r\n    switch (signal.type) {\r\n      case PeerConnectionSignalType.Offer:\r\n        this.processOffer(signal.data);\r\n        break;\r\n      case PeerConnectionSignalType.Answer:\r\n        this.processAnswer(signal.data);\r\n        break;\r\n      case PeerConnectionSignalType.Candidate:\r\n        this.processCandidate(signal.data);\r\n        break;\r\n    }\r\n  };\r\n\r\n  private createPeerConnection = function (flag = true) {\r\n    this.pc = new RTCPeerConnection(PeerConnection.getPeerConnectionConfig());\r\n    if (this.track) this.pc.addTrack(this.track, this.stream);\r\n    this.pc.onicecandidate = this.handleIceCandidate.bind(this);\r\n    this.pc.onaddstream = this.handleRemoteStreamAdded.bind(this);\r\n    this.pc.onremovestream = this.handleRemoteStreamRemoved.bind(this);\r\n    this.pc.onconnectionstatechange = this.handlePeerConnectionStateChange.bind(\r\n      this\r\n    );\r\n    if (flag)\r\n      this.pc.createOffer(\r\n        this.setLocalAndSendOffer.bind(this),\r\n        this.handleCreateOfferError.bind(this)\r\n      );\r\n  };\r\n\r\n  private handleRemoteStreamAdded = function (e) {\r\n    this.addLog(\"handleRemoteStreamAdded\", e);\r\n    if (this.processPeerStream) {\r\n      this.processPeerStream(this.id, e.stream);\r\n    }\r\n  };\r\n\r\n  private handleRemoteStreamRemoved = function (e) {\r\n    if (this.processPeerStream) {\r\n      this.processPeerStream(this.id, null);\r\n    }\r\n    //this.addLog(\"handleRemoteStreamRemoved\", e);\r\n  };\r\n\r\n  private handlePeerConnectionStateChange = function (event) {\r\n    switch (this.pc.connectionState) {\r\n      case \"connected\":\r\n        // The connection has become fully connected\r\n        break;\r\n      case \"disconnected\":\r\n      case \"failed\":\r\n        this.pc.close();\r\n        break;\r\n      case \"closed\":\r\n        if (this.processPeerStream) {\r\n          this.pc.close();\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  private setLocalAndSendOffer = function (sessionDescription) {\r\n    this.pc.setLocalDescription(sessionDescription);\r\n    this.sendSignal(PeerConnectionSignalType.Offer, sessionDescription);\r\n  };\r\n\r\n  private handleCreateOfferError = function (event) {\r\n    this.addLog(\"createOffer() error: \", event);\r\n  };\r\n\r\n  private processOffer = function (offer) {\r\n    if (!this.pc) this.createPeerConnection(false);\r\n    this.pc.setRemoteDescription(new RTCSessionDescription(offer));\r\n    //this.addLog(\"Sending answer to peer.\");\r\n    this.pc\r\n      .createAnswer()\r\n      .then(\r\n        this.setLocalAndSendAnswer.bind(this),\r\n        this.onCreateSessionDescriptionError.bind(this)\r\n      );\r\n  };\r\n\r\n  private setLocalAndSendAnswer = function (sessionDescription) {\r\n    this.pc.setLocalDescription(sessionDescription);\r\n    //this.addLog(\"setLocalAndSendAnswer sending message\", sessionDescription);\r\n    this.sendSignal(PeerConnectionSignalType.Answer, sessionDescription);\r\n  };\r\n\r\n  private onCreateSessionDescriptionError = function (error) {\r\n    this.addLog(\"Failed to create session description: \" + error.toString());\r\n  };\r\n\r\n  private processAnswer = function (data) {\r\n    this.pc.setRemoteDescription(new RTCSessionDescription(data));\r\n  };\r\n\r\n  private handleIceCandidate = function (event) {\r\n    // this.addLog(\"icecandidate event: \", event);\r\n    if (event.candidate) {\r\n      this.sendSignal(PeerConnectionSignalType.Candidate, {\r\n        type: \"candidate\",\r\n        label: event.candidate.sdpMLineIndex,\r\n        id: event.candidate.sdpMid,\r\n        candidate: event.candidate.candidate,\r\n      });\r\n    } else {\r\n      //this.addLog(\"End of candidates.\");\r\n    }\r\n  };\r\n\r\n  private processCandidate = function (data) {\r\n    var candidate = new RTCIceCandidate({\r\n      sdpMLineIndex: data.label,\r\n      candidate: data.candidate,\r\n    });\r\n    this.pc.addIceCandidate(candidate);\r\n  };\r\n\r\n  private addLog = function (...arg) {\r\n    console.log(...arg);\r\n  };\r\n\r\n  private sendSignal = function (type, signal) {\r\n    this.sender({\r\n      id: this.id,\r\n      type: type,\r\n      data: signal,\r\n    });\r\n  };\r\n}\r\n\r\nclass PeerConnectionSignal {\r\n  id: string;\r\n  type: PeerConnectionSignalType;\r\n  data: any;\r\n}\r\n\r\nenum PeerConnectionSignalType {\r\n  Offer = 1,\r\n  Answer = 2,\r\n  Candidate = 3,\r\n}\r\n","export class CallSignal {\r\n  type: CallSignalType;\r\n  from: number;\r\n  data: any;\r\n}\r\n\r\nexport enum CallSignalType {\r\n  IncomingCall = 1,\r\n}\r\n\r\nexport enum CallStatus {\r\n  Idle = 1,\r\n  Incoming = 2,\r\n  Outgoing = 3,\r\n  InCall = 4,\r\n}\r\n\r\nexport class OngoingCall {\r\n  status: CallStatus;\r\n  connectedUserId: number;\r\n  callStartTime: any;\r\n}\r\n","export interface Message {\r\n  from: number;\r\n  to: number;\r\n  id: string;\r\n  content: string;\r\n  type: MessageType;\r\n  timeStamp: Date;\r\n  relativeTimeStamp?: string;\r\n  fileName?: string;\r\n}\r\n\r\nexport enum MessageType {\r\n  Text = 1,\r\n  Image = 2,\r\n  File = 3,\r\n  Video = 4,\r\n  Url = 5,\r\n  InitiateCall = 6,\r\n  AcceptCall = 7,\r\n  RejectCall = 8,\r\n  Disconnect = 9,\r\n  Busy = 10,\r\n  Offer = 11,\r\n  Answer = 12,\r\n  Candidate = 13,\r\n}\r\n","import { MessageType } from './message';\r\n\r\nexport class OutgoingSignal {\r\n  type: SignalType;\r\n  data: OutgoingSignalData;\r\n}\r\n\r\nexport class IncomingSignal {\r\n  from: number;\r\n  groupId: number;\r\n  type: MessageType;\r\n  message: string;\r\n}\r\n\r\nexport enum SignalType {\r\n  register = 1,\r\n  message = 2,\r\n  call=3\r\n}\r\n\r\nexport interface IncomingSignalData {\r\n  to: number;\r\n  type: MessageType;\r\n  message: string;\r\n  isGroupMessage: boolean;\r\n}\r\n\r\nexport class OutgoingSignalData {\r\n  to: string;\r\n  type: MessageType;\r\n  message: string;\r\n  isGroupMessage: boolean;\r\n  data:any\r\n}\r\n\r\n","export enum StreamOptions {\r\n  Audio = 1,\r\n  Video = 2,\r\n}\r\n","import { Pipe, PipeTransform } from \"@angular/core\";\r\n@Pipe({\r\n  name: \"filter\",\r\n})\r\nexport class FilterPipe implements PipeTransform {\r\n  transform(items: any[], searchText: string): any[] {\r\n    if (!items) return [];\r\n    if (!searchText) return items;\r\n    searchText = searchText.toLowerCase();\r\n    return items.filter((it) => {\r\n      return (it.firstName + \" \" + it.lastName)\r\n        .toLowerCase()\r\n        .includes(searchText);\r\n    });\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'message'\r\n})\r\nexport class MessagePipe implements PipeTransform {\r\n\r\n  transform(items: any[], searchText: string): any[] {\r\n    if (!items) return [];\r\n    if (!searchText) return items;\r\n    searchText = searchText.toLowerCase();\r\n    return items.filter((it) => {\r\n      return it.content\r\n        .toLowerCase()\r\n        .includes(searchText);\r\n    });\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport TimeAgo from \"javascript-time-ago\";\r\n\r\n// Load locale-specific relative date/time formatting rules.\r\nimport en from \"javascript-time-ago/locale/en\";\r\n// Add locale-specific relative date/time formatting rules.\r\nTimeAgo.addLocale(en);\r\n\r\n@Pipe({\r\n  name: 'timeAgo'\r\n})\r\nexport class TimeAgoPipe implements PipeTransform {\r\n\r\n  timeAgo = new TimeAgo(\"en-US\");\r\n  transform(value: any, ...args: unknown[]): unknown {\r\n    return this.timeAgo.format(new Date(value));\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiService\r\n {\r\n  get httpOptions(){\r\n    return {headers: new HttpHeaders({ 'Authorization': this.cookieService.get('token') })}\r\n};\r\n  constructor(private http:HttpClient,private cookieService:CookieService) { }\r\n\r\n  get(path){\r\n    return Observable.create(o=>{\r\n      this.http.get(`${environment.SERVER_URL}${environment.API_PATH}${path}`,this.httpOptions)\r\n      .subscribe(d=>{\r\n        o.next(d);\r\n      },e=>{\r\n        o.next(e)\r\n      })\r\n    })\r\n  }\r\n\r\n  post(path,data){\r\n    return Observable.create(o=>{\r\n      this.http.post(`${environment.SERVER_URL}${environment.API_PATH}${path}`,data,this.httpOptions)\r\n      .subscribe(d=>{\r\n        o.next(d);\r\n      },e=>{\r\n        o.next(e)\r\n      })\r\n    })\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { ApiService } from \"./api.service\";\r\nimport { CookieService } from \"ngx-cookie-service\";\r\nimport { Observable } from \"rxjs\";\r\nimport { UserService } from \"./user.service\";\r\nimport * as CryptoJS from \"crypto-js\";\r\nimport { SocketService } from \"./socket.service\";\r\nimport {\r\n  OutgoingSignal,\r\n  SignalType,\r\n  OutgoingSignalData,\r\n} from \"../models/signal\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class AuthService {\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private cookieService: CookieService,\r\n    private userService: UserService,\r\n    private socketService: SocketService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  private loggedInUserId = 0;\r\n\r\n  isLoggedIn(): Observable<boolean> {\r\n    return new Observable((ob) => {\r\n      if (this.loggedInUserId) ob.next(true);\r\n      else {\r\n        this.apiService.get(\"/user/profile\").subscribe((res) => {\r\n          if (res.success) {\r\n            this.userService.setUser(res.data.user);\r\n            this.registerUserOnSocker(this.cookieService.get(\"token\"));\r\n            this.loggedInUserId = res.data.user.userId;\r\n            ob.next(true);\r\n          } else {\r\n            this.router.navigate([\"/login\"]);\r\n            ob.next(false);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  logOut() {\r\n    this.cookieService.delete(\"token\");\r\n    this.socketService.logout();\r\n  }\r\n\r\n  authenticate(cred) {\r\n    cred.password = CryptoJS.SHA256(cred.password).toString();\r\n    return Observable.create((o) => {\r\n      this.apiService.post(\"/authenticate\", cred).subscribe((res: any) => {\r\n        if (res.success) {\r\n          window[\"$\"](\".loader-container\").show();\r\n          this.setToken(res.data.token);\r\n          setTimeout(() => {\r\n            this.registerUserOnSocker(res.data.token);\r\n          }, 0);\r\n          if (!res.data.user.profileImagePath) {\r\n            res.data.user.profileImagePath = `https://ui-avatars.com/api/?name=${res.data.user.firstName}+${res.data.user.lastName}&background=0D8ABC&color=fff&rounded=true&size=150`;\r\n          }\r\n          this.userService.setUser(res.data.user);\r\n          o.next(true);\r\n        } else {\r\n          o.next(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private setToken(token) {\r\n    this.cookieService.set(\"token\", token);\r\n  }\r\n\r\n  private registerUserOnSocker(token) {\r\n    let signal = new OutgoingSignal();\r\n    signal.type = SignalType.register;\r\n    signal.data = new OutgoingSignalData();\r\n    signal.data.message = token;\r\n    this.socketService.sendSignal(signal);\r\n  }\r\n\r\n  register(user) {\r\n    user.password = CryptoJS.SHA256(user.password).toString();\r\n    return Observable.create((o) => {\r\n      this.apiService.post(\"/register\", user).subscribe((res: any) => {\r\n        if (res.success) {\r\n          window[\"$\"](\".loader-container\").show();\r\n          this.setToken(res.data.token);\r\n          this.registerUserOnSocker(res.data.token);\r\n          this.userService.setUser(res.data.user);\r\n          o.next(true);\r\n        } else {\r\n          o.next(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { SocketService } from \"./socket.service\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport {\r\n  OutgoingSignal,\r\n  SignalType,\r\n  OutgoingSignalData,\r\n  IncomingSignal,\r\n} from \"../models/signal\";\r\nimport { MessageType } from \"../models/message\";\r\nimport { OngoingCall, CallStatus } from \"../models/call\";\r\nimport { PeerConnection } from \"../helper/PeerConnection\";\r\nimport { StreamOptions } from \"../models/stream\";\r\nimport { UserService } from \"./user.service\";\r\nimport { IfStmt } from \"@angular/compiler\";\r\n\r\nvar pcConfig = PeerConnection.getPeerConnectionConfig();\r\n\r\n// Set up audio and video regardless of what devices are present.\r\nvar sdpConstraints = {\r\n  offerToReceiveAudio: true,\r\n  offerToReceiveVideo: true,\r\n};\r\n\r\nconst dataChannelOptions = {\r\n  ordered: true, // do not guarantee order\r\n  maxPacketLifeTime: 30000, // in milliseconds\r\n};\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class CallService {\r\n  incomingCall = new BehaviorSubject<any>({});\r\n  maximizeWindow = new BehaviorSubject<boolean>(false);\r\n  localStreamSubject = new BehaviorSubject<any>({});\r\n  remoteStreamSubject = new BehaviorSubject<any>({});\r\n  streamSubject = new BehaviorSubject<any>({});\r\n  ongoingCall: OngoingCall;\r\n  localStream;\r\n  isMaximizedWindow = false;\r\n  pc;\r\n  user;\r\n  remoteStream: any;\r\n  sender: any;\r\n  dataChannel;\r\n  localPeer = {};\r\n  peer = {};\r\n\r\n  constructor(\r\n    private socketService: SocketService,\r\n    private userService: UserService\r\n  ) {\r\n    this.ongoingCall = new OngoingCall();\r\n    this.ongoingCall.status = CallStatus.Idle;\r\n    this.user = this.userService.getUser();\r\n    this.socketService.event(\"message\").subscribe(async (_signal: string) => {\r\n      let signal = JSON.parse(_signal);\r\n      if (signal.type == SignalType.call) {\r\n        await this.processCallSignal(signal.data);\r\n      }\r\n    });\r\n  }\r\n\r\n  private async processCallSignal(callSignal) {\r\n    switch (callSignal.type) {\r\n      case MessageType.InitiateCall:\r\n        if (this.ongoingCall.status === CallStatus.Idle) {\r\n          this.ongoingCall.status = CallStatus.Incoming;\r\n          this.incomingCall.next(callSignal.from);\r\n        } else {\r\n          this.sendCallSignal(callSignal.from, MessageType.Busy);\r\n        }\r\n        break;\r\n      case MessageType.Busy:\r\n        this.ongoingCall.status = CallStatus.Idle;\r\n        this.addLog(\"busy\");\r\n        break;\r\n      case MessageType.RejectCall:\r\n        this.ongoingCall.status = CallStatus.Idle;\r\n        this.addLog(\"rejected\");\r\n        break;\r\n      case MessageType.Disconnect:\r\n        this.ongoingCall.status = CallStatus.Idle;\r\n        this.addLog(\"disconnect\");\r\n        break;\r\n      case MessageType.AcceptCall:\r\n        this.ongoingCall.status = CallStatus.InCall;\r\n        this.ongoingCall.connectedUserId = callSignal.from;\r\n        this.ongoingCall.callStartTime = new Date();\r\n        this.addLog(\"accepted\", this.ongoingCall);\r\n        this.initiateCall();\r\n        break;\r\n      case MessageType.Offer:\r\n        this.onOffer(callSignal.data);\r\n        break;\r\n      case MessageType.Answer:\r\n        this.hendleAnswer(callSignal.data);\r\n        break;\r\n      case MessageType.Candidate:\r\n        this.onCandidate(callSignal.data);\r\n        break;\r\n    }\r\n  }\r\n\r\n  private sendCallSignal(id, type, data = null) {\r\n    let signal = new OutgoingSignal();\r\n    signal.type = SignalType.call;\r\n    signal.data = new OutgoingSignalData();\r\n    signal.data.to = id;\r\n    signal.data.type = type;\r\n    signal.data.data = data;\r\n    signal.data.isGroupMessage = false;\r\n    this.socketService.sendSignal(signal);\r\n  }\r\n\r\n  async makeCall(id) {\r\n    this.localStream = await this.requestStream(StreamOptions.Audio);\r\n    this.ongoingCall.status = CallStatus.Outgoing;\r\n    this.sendCallSignal(id, MessageType.InitiateCall);\r\n  }\r\n\r\n  disableVideo() {\r\n    let streamId = this.user.userId + \"_video\";\r\n    if (this.peer[streamId]) {\r\n      this.peer[streamId].closeConnection();\r\n      this.localStreamSubject.next({});\r\n      this.peer[streamId] = null;\r\n      this.sendSignalOverDataChannel({ type: \"close\", id: streamId });\r\n    }\r\n  }\r\n\r\n  async enableVideo() {\r\n    let videoStream = <any>await this.requestStream(StreamOptions.Video);\r\n    this.localStreamSubject.next(videoStream);\r\n    let videoTrack = videoStream.getVideoTracks()[0];\r\n    let streamId = this.user.userId + \"_video\";\r\n    this.peer[streamId] = new PeerConnection(\r\n      streamId,\r\n      videoTrack,\r\n      videoStream,\r\n      this.dataChannerSender.bind(this),\r\n      null\r\n    );\r\n    this.peer[streamId].initialize();\r\n  }\r\n\r\n  disableScreen() {\r\n    let streamId = this.user.userId + \"_screen\";\r\n    if (this.peer[streamId]) {\r\n      this.peer[streamId].closeConnection();\r\n      this.peer[streamId] = null;\r\n      this.sendSignalOverDataChannel({ type: \"close\", id: streamId });\r\n    }\r\n  }\r\n  toggleMute() {\r\n    let audioTrack = this.localStream.getAudioTracks()[0];\r\n    audioTrack.enabled = !audioTrack.enabled;\r\n  }\r\n\r\n  async enableScreen() {\r\n    let videoStream = <any>await this.requestScreen();\r\n    let videoTrack = videoStream.getVideoTracks()[0];\r\n    let streamId = this.user.userId + \"_screen\";\r\n    this.peer[streamId] = new PeerConnection(\r\n      streamId,\r\n      videoTrack,\r\n      videoStream,\r\n      this.dataChannerSender.bind(this),\r\n      null\r\n    );\r\n    this.peer[streamId].initialize();\r\n  }\r\n\r\n  toggleWindow() {\r\n    this.isMaximizedWindow = !this.isMaximizedWindow;\r\n    this.maximizeWindow.next(this.isMaximizedWindow);\r\n  }\r\n  disableAudio() {}\r\n\r\n  disconnect() {\r\n    this.sendSignalOverDataChannel({ type: \"disconnect\" });\r\n    this.closeAllConnections();\r\n  }\r\n\r\n  closeAllConnections() {\r\n    this.disableScreen();\r\n    this.disableVideo();\r\n    this.dataChannel.close();\r\n    this.dataChannel = null;\r\n    this.pc.close();\r\n    this.pc = null;\r\n    let audioTrack = this.localStream.getAudioTracks()[0];\r\n    audioTrack.stop();\r\n\r\n    this.localStreamSubject.next({});\r\n    this.remoteStreamSubject.next({});\r\n    this.ongoingCall.status = CallStatus.Idle;\r\n    this.isMaximizedWindow = false;\r\n    this.maximizeWindow.next(this.isMaximizedWindow);\r\n  }\r\n  busy(id) {\r\n    this.sendCallSignal(id, MessageType.Busy);\r\n  }\r\n  async acceptCall(id) {\r\n    this.localStream = await this.requestStream(StreamOptions.Audio);\r\n    this.ongoingCall.status = CallStatus.InCall;\r\n    this.ongoingCall.connectedUserId = id;\r\n    this.ongoingCall.callStartTime = new Date();\r\n    this.sendCallSignal(id, MessageType.AcceptCall);\r\n    this.addLog(\"accepted\", this.ongoingCall);\r\n    this.createPeerConnection();\r\n    let audioTrack = this.localStream.getAudioTracks()[0];\r\n    this.pc.addTrack(audioTrack, this.localStream);\r\n  }\r\n  rejectCall(id) {\r\n    this.ongoingCall.status = CallStatus.Idle;\r\n    this.sendCallSignal(id, MessageType.RejectCall);\r\n  }\r\n  initiateCall() {\r\n    this.addLog(\">>>>>> creating peer connection\");\r\n    this.createPeerConnection(true);\r\n    let audioTrack = this.localStream.getAudioTracks()[0];\r\n    this.pc.addTrack(audioTrack, this.localStream);\r\n    this.doCall();\r\n  }\r\n\r\n  doCall() {\r\n    this.addLog(\"Sending offer to peer\");\r\n    this.pc.createOffer(\r\n      this.setLocalAndSendOffer.bind(this),\r\n      this.handleCreateOfferError.bind(this)\r\n    );\r\n  }\r\n\r\n  onCandidate(message) {\r\n    var candidate = new RTCIceCandidate({\r\n      sdpMLineIndex: message.label,\r\n      candidate: message.candidate,\r\n    });\r\n    this.pc.addIceCandidate(candidate);\r\n  }\r\n\r\n  onOffer(message) {\r\n    this.pc.setRemoteDescription(new RTCSessionDescription(message));\r\n    this.doAnswer();\r\n  }\r\n\r\n  doAnswer() {\r\n    this.addLog(\"Sending answer to peer.\");\r\n    this.pc\r\n      .createAnswer()\r\n      .then(\r\n        this.setLocalAndSendAnswer.bind(this),\r\n        this.onCreateSessionDescriptionError.bind(this)\r\n      );\r\n  }\r\n\r\n  hendleAnswer(data) {\r\n    this.pc.setRemoteDescription(new RTCSessionDescription(data));\r\n  }\r\n\r\n  setLocalAndSendAnswer(sessionDescription) {\r\n    this.pc.setLocalDescription(sessionDescription);\r\n    this.addLog(\"setLocalAndSendAnswer sending message\", sessionDescription);\r\n    this.sendCallSignal(\r\n      this.ongoingCall.connectedUserId,\r\n      MessageType.Answer,\r\n      sessionDescription\r\n    );\r\n  }\r\n\r\n  setLocalAndSendOffer(sessionDescription) {\r\n    this.pc.setLocalDescription(sessionDescription);\r\n    this.addLog(\"setLocalAndSendOffer sending message\", sessionDescription);\r\n    this.sendCallSignal(\r\n      this.ongoingCall.connectedUserId,\r\n      MessageType.Offer,\r\n      sessionDescription\r\n    );\r\n  }\r\n\r\n  onCreateSessionDescriptionError(error) {\r\n    console.trace(\"Failed to create session description: \" + error.toString());\r\n  }\r\n\r\n  handleCreateOfferError(event) {\r\n    this.addLog(\"createOffer() error: \", event);\r\n  }\r\n\r\n  requestStream(op) {\r\n    return new Promise((resolve, reject) => {\r\n      let audio = false;\r\n      let video = false;\r\n      if (op == StreamOptions.Audio) audio = true;\r\n      if (op == StreamOptions.Video) video = true;\r\n      window[\"navigator\"].mediaDevices\r\n        .getUserMedia({\r\n          audio: audio,\r\n          video: video,\r\n        })\r\n        .then((stream) => {\r\n          this.addLog(\"Adding local stream.\");\r\n          resolve(stream);\r\n        })\r\n        .catch(function (e) {\r\n          alert(\"getUserMedia() error: \" + e.name);\r\n          reject();\r\n        });\r\n    });\r\n  }\r\n\r\n  async requestScreen() {\r\n    let captureStream = null;\r\n    var displayMediaStreamConstraints = {\r\n      video: true, // or pass HINTS\r\n    };\r\n    try {\r\n      if (navigator.mediaDevices[\"getDisplayMedia\"]) {\r\n        captureStream = await navigator.mediaDevices[\"getDisplayMedia\"](\r\n          displayMediaStreamConstraints\r\n        );\r\n      } else {\r\n        captureStream = await navigator[\"getDisplayMedia\"](\r\n          displayMediaStreamConstraints\r\n        );\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error: \" + err);\r\n    }\r\n    return captureStream;\r\n  }\r\n\r\n  addLog(...arg) {\r\n    //console.log(...arg);\r\n  }\r\n\r\n  createPeerConnection(createDC = false) {\r\n    try {\r\n      this.pc = new RTCPeerConnection(pcConfig);\r\n      window[\"pc\"] = this.pc;\r\n      if (createDC) this.createDataChannel();\r\n      this.pc.onicecandidate = this.handleIceCandidate.bind(this);\r\n      this.pc.onaddstream = this.handleRemoteStreamAdded.bind(this);\r\n      this.pc.ondatachannel = this.onDataChannel.bind(this);\r\n      this.pc.onremovestream = this.handleRemoteStreamRemoved.bind(this);\r\n      this.pc.onconnectionstatechange = this.handlePeerConnectionStateChange.bind(\r\n        this\r\n      );\r\n      this.addLog(\"Created RTCPeerConnnection\");\r\n    } catch (e) {\r\n      this.addLog(\"Failed to create PeerConnection, exception: \" + e.message);\r\n      alert(\"Cannot create RTCPeerConnection object.\");\r\n      return;\r\n    }\r\n  }\r\n\r\n  onDataChannel(event) {\r\n    this.addLog(\"data channel created\");\r\n    if (!this.dataChannel) {\r\n      this.addLog(event);\r\n      this.dataChannel = event.channel;\r\n      this.attachEventsToDataChannel();\r\n    }\r\n  }\r\n\r\n  handlePeerConnectionStateChange(event) {\r\n    switch (this.pc.connectionState) {\r\n      case \"connected\":\r\n        // The connection has become fully connected\r\n        break;\r\n      case \"disconnected\":\r\n      case \"failed\":\r\n        this.callDesconnected();\r\n        break;\r\n      case \"closed\":\r\n        this.callDesconnected();\r\n        break;\r\n    }\r\n  }\r\n\r\n  callDesconnected() {\r\n    this.remoteStreamSubject.next({});\r\n    this.ongoingCall.status = CallStatus.Idle;\r\n    //alert(\"failed 2\");\r\n  }\r\n\r\n  handleIceCandidate(event) {\r\n    this.addLog(\"icecandidate event: \", event);\r\n    if (event.candidate) {\r\n      this.sendCallSignal(\r\n        this.ongoingCall.connectedUserId,\r\n        MessageType.Candidate,\r\n        {\r\n          type: \"candidate\",\r\n          label: event.candidate.sdpMLineIndex,\r\n          id: event.candidate.sdpMid,\r\n          candidate: event.candidate.candidate,\r\n        }\r\n      );\r\n    } else {\r\n      this.addLog(\"End of candidates.\");\r\n    }\r\n  }\r\n\r\n  handleRemoteStreamAdded(event) {\r\n    this.addLog(\"Remote stream added.\");\r\n    this.remoteStream = event.stream;\r\n    this.remoteStreamSubject.next(this.remoteStream);\r\n  }\r\n  handleRemoteStreamRemoved(event) {\r\n    this.remoteStreamSubject.next(null);\r\n    this.addLog(\"Remote stream removed. Event: \", event);\r\n  }\r\n\r\n  createDataChannel() {\r\n    if (!this.dataChannel) {\r\n      this.dataChannel = this.pc.createDataChannel(\"test\");\r\n      this.attachEventsToDataChannel();\r\n      window[\"dc\"] = this.dataChannel;\r\n    }\r\n  }\r\n\r\n  attachEventsToDataChannel() {\r\n    this.addLog(\"called\");\r\n    this.dataChannel.onerror = (error) => {\r\n      this.addLog(\"Data Channel Error:\", error);\r\n    };\r\n\r\n    this.dataChannel.addEventListener(\"message\", (event) => {\r\n      const message = event.data;\r\n      let signal = JSON.parse(message);\r\n      if (signal.type == \"dc\") {\r\n        let data = JSON.parse(signal.data);\r\n        if (!this.peer[data.id]) {\r\n          this.peer[data.id] = new PeerConnection(\r\n            data.id,\r\n            null,\r\n            null,\r\n            this.dataChannerSender.bind(this),\r\n            this.processPeerStream.bind(this)\r\n          );\r\n        }\r\n        this.peer[data.id].processSignal(data);\r\n      } else if (signal.type == \"close\") {\r\n        this.closePeerConnection(signal);\r\n      } else if (signal.type == \"disconnect\") {\r\n        this.closeAllConnections();\r\n      }\r\n      this.addLog(\"Got Data Channel Message:\", event.data);\r\n    });\r\n    this.dataChannel.onopen = () => {\r\n      this.addLog(arguments);\r\n    };\r\n\r\n    this.dataChannel.onclose = () => {\r\n      this.addLog(\"The Data Channel is Closed\");\r\n    };\r\n  }\r\n\r\n  processPeerStream(id, stream) {\r\n    this.streamSubject.next({ id: id, stream: stream });\r\n  }\r\n\r\n  closePeerConnection(data) {\r\n    this.peer[data.id].closeConnection();\r\n    this.peer[data.id] = null;\r\n    this.streamSubject.next({ id: data.id, stream: null });\r\n  }\r\n\r\n  dataChannerSender(data) {\r\n    let signal = {\r\n      type: \"dc\",\r\n      data: JSON.stringify(data),\r\n    };\r\n    this.sendSignalOverDataChannel(signal);\r\n  }\r\n  sendSignalOverDataChannel(signal) {\r\n    if (this.dataChannel) this.dataChannel.send(JSON.stringify(signal));\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { ApiService } from \"./api.service\";\r\nimport { Observable, BehaviorSubject } from \"rxjs\";\r\nimport { SocketService } from \"./socket.service\";\r\nimport {\r\n  OutgoingSignal,\r\n  SignalType,\r\n  OutgoingSignalData,\r\n} from \"../models/signal\";\r\nimport { UserService } from \"./user.service\";\r\nimport { Socket } from \"ngx-socket-io\";\r\nimport { NotificationService } from \"./notification.service\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class ChatService {\r\n  activeUserSubject = new BehaviorSubject<any>(null);\r\n  activeMessages = new BehaviorSubject<any>(null);\r\n  searchSubject = new BehaviorSubject<any>(\"\");\r\n  private _activeUser;\r\n  private user;\r\n  private _metadata = {};\r\n  private messages = { users: {}, groups: {} };\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private socketService: SocketService,\r\n    private userService: UserService,\r\n    private notificationService: NotificationService\r\n  ) {\r\n    this.user = this.userService.getUser();\r\n    this.userService.userSubject.subscribe((user) => {\r\n      this.user = user;\r\n    });\r\n\r\n    this.socketService.event(\"message\").subscribe((_signal: string) => {\r\n      let signal= JSON.parse(_signal);\r\n      if(signal.type==SignalType.message){\r\n        let msg = signal.data\r\n      if (msg) {\r\n        let message = this.formatMessage(\r\n          msg.message,\r\n          msg.type,\r\n          msg.from,\r\n          msg.to\r\n        );\r\n        this.pushMessage(message, true);\r\n        if (msg.from !== this._activeUser.userId) {\r\n          this.trigerNotification(msg);\r\n        }\r\n      }\r\n    }\r\n    });\r\n  }\r\n\r\n  trigerNotification(msg) {\r\n    let user: any = this.userService.getUserByUserId(msg.from);\r\n    this.notificationService.info(user.firstName, msg.message);\r\n  }\r\n\r\n  createGroup(data) {\r\n    return Observable.create((ob) => {\r\n      this.apiService.post(\"/group/create\", data).subscribe((res) => {\r\n        ob.next(res.success);\r\n      });\r\n    });\r\n  }\r\n\r\n  updateSearchQuery(query){\r\n    this.searchSubject.next(query);\r\n  }\r\n\r\n  getUrlMetadata(url) {\r\n    return Observable.create((ob) => {\r\n      if (this._metadata[url]) {\r\n        ob.next(this._metadata[url]);\r\n      } else {\r\n        this.apiService.post(\"/metadata/get\", { url }).subscribe((res) => {\r\n          this._metadata[url] = res;\r\n          ob.next(res);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  setActiveUser(user) {\r\n    this._activeUser = user;\r\n    this.activeUserSubject.next(this._activeUser);\r\n    if (!this.messages.users[this._activeUser.userId]) {\r\n      this.initializeChat(this._activeUser.userId, false);\r\n      this.refreshChatWindow();\r\n      this.apiService\r\n        .post(\"/chat/messages\", { isGroup: false, id: this._activeUser.userId })\r\n        .subscribe((response) => {\r\n          if (response.success) {\r\n            this.messages.users[this._activeUser.userId].fetchStatus = true;\r\n            response.data.messages.forEach((msg) => {\r\n              this.messages.users[this._activeUser.userId].chat.push(\r\n                this.formatMessage(\r\n                  msg.message,\r\n                  msg.messageType,\r\n                  msg.senderId,\r\n                  msg.receiverId,\r\n                  new Date(msg.sendDate)\r\n                )\r\n              );\r\n            });\r\n          }\r\n          this.refreshChatWindow();\r\n        });\r\n    } else this.refreshChatWindow();\r\n    this.userService.resetUnreadCount(this._activeUser.userId);\r\n  }\r\n\r\n  getTimeStamp(date: Date) {\r\n    return date.toLocaleString(\"en-US\", {\r\n      hour: \"numeric\",\r\n      minute: \"numeric\",\r\n      hour12: true,\r\n    });\r\n  }\r\n\r\n  //send message\r\n  sendMessage(text: string, type) {\r\n    let message = this.formatMessage(text, type);\r\n    let signal = new OutgoingSignal();\r\n    signal.type = SignalType.message;\r\n    signal.data = new OutgoingSignalData();\r\n    signal.data.type = message.type;\r\n    signal.data.message = message.content;\r\n    signal.data.to = this._activeUser.userId;\r\n    signal.data.isGroupMessage = false;\r\n    this.socketService.sendSignal(signal);\r\n    this.pushMessage(message);\r\n  }\r\n\r\n  private formatMessage(\r\n    text,\r\n    type,\r\n    from = this.user.userId,\r\n    to = this._activeUser.userId,\r\n    timestamp = new Date()\r\n  ) {\r\n    return {\r\n      timeStamp: timestamp,\r\n      to: to,\r\n      content: text,\r\n      type: type,\r\n      from: from,\r\n    };\r\n  }\r\n\r\n  private refreshChatWindow() {\r\n    if (!this.messages.users[this._activeUser.userId])\r\n      this.initializeChat(this._activeUser.userId, false);\r\n    this.activeMessages.next(this.messages.users[this._activeUser.userId].chat);\r\n  }\r\n  initializeChat(id, isGroup) {\r\n    this.messages[isGroup ? \"group\" : \"users\"][id] = {\r\n      fetchStatus: false,\r\n      chat: [],\r\n    };\r\n  }\r\n\r\n  private pushMessage(msg, incoming = false) {\r\n    if (!this.messages.users[incoming ? msg.from : msg.to]) {\r\n      this.initializeChat(incoming ? msg.from : msg.to, false);\r\n    }\r\n    this.messages.users[incoming ? msg.from : msg.to].chat.push(msg);\r\n    this.userService.updateLastMessage(msg, this._activeUser.userId);\r\n    this.refreshChatWindow();\r\n  }\r\n\r\n  uploadFile(file) {\r\n    return Observable.create((ob) => {\r\n      const formData: FormData = new FormData();\r\n      formData.append(\"file\", file, file.name);\r\n      this.apiService.post(\"/file/upload\", formData).subscribe(\r\n        (res) => {\r\n          if (res.success) ob.next(res.data);\r\n        },\r\n        () => {\r\n          ob.next(false);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  isValidUrl(string) {\r\n    try {\r\n      new URL(string);\r\n      return true;\r\n    } catch (_) {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class NotificationService {\r\n  constructor() {}\r\n\r\n  info(title, message) {\r\n    this.triggerNotification(\"info\", title, message);\r\n  }\r\n  success(title, message) {\r\n    this.triggerNotification(\"success\", title, message);}\r\n  failure(title, message) {\r\n    this.triggerNotification(\"error\", title, message);}\r\n\r\n  private triggerNotification(type, title, message) {\r\n    window[\"$\"].ambiance({\r\n      message: message,\r\n      title: title,\r\n      type: type\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Socket } from \"ngx-socket-io\";\r\nimport { OutgoingSignal } from \"../models/signal\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class SocketService {\r\n  constructor(private socket: Socket) {}\r\n\r\n  event(event: string) {\r\n    return this.socket.fromEvent(event);\r\n  }\r\n\r\n  sendSignal(data: OutgoingSignal, event: string = \"message\") {\r\n    let signal = JSON.stringify(data);\r\n    this.socket.emit(event, signal);\r\n  }\r\n\r\n  logout() {\r\n    this.socket.emit(\"logout\");\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { BehaviorSubject, Observable } from \"rxjs\";\r\nimport { ApiService } from \"./api.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { environment } from \"src/environments/environment\";\r\nimport { Socket } from \"ngx-socket-io\";\r\nimport { SocketService } from \"./socket.service\";\r\nimport { MessageType } from \"../models/message\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class UserService {\r\n  userSubject = new BehaviorSubject<any>([]);\r\n  activeUsers = new BehaviorSubject<any>(null);\r\n  openProfile = new BehaviorSubject<any>(null);\r\n  private _user;\r\n  private users = [];\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private router: Router,\r\n    private socketService: SocketService\r\n  ) {\r\n    this.socketService.event(\"statusupdate\").subscribe((update: string) => {\r\n      let data = JSON.parse(update);\r\n      this.users.map((user) => {\r\n        if (user.userId == data.userId) {\r\n          user.online = data.status;\r\n        }\r\n        return user;\r\n      });\r\n      this.activeUsers.next(this.users);\r\n    });\r\n  }\r\n\r\n  viewProfile(id) {\r\n    console.log(this.users.filter((u) => u.userId == id));\r\n    this.openProfile.next(this.users.filter((u) => u.userId == id)[0]);\r\n  }\r\n\r\n  setUser(user) {\r\n    if (!user.profileImagePath) {\r\n      user.profileImagePath = `https://ui-avatars.com/api/?name=${user.firstName}+${user.lastName}&background=0D8ABC&color=fff&rounded=true&size=150`;\r\n    } else {\r\n      user.profileImagePath = environment.SERVER_URL + user.profileImagePath;\r\n    }\r\n    this._user = user;\r\n    this.populateUser();\r\n    this.userSubject.next(user);\r\n    document.title = `${user.firstName} ${user.lastName} - ChatApp`;\r\n    this.getAllUsers();\r\n  }\r\n\r\n  private populateUser() {\r\n    this.apiService.get(\"/user/profile\").subscribe((res) => {\r\n      if (res.success) {\r\n        if (!res.data.user.profileImagePath) {\r\n          res.data.user.profileImagePath = `https://ui-avatars.com/api/?name=${res.data.user.firstName}+${res.data.user.lastName}&background=0D8ABC&color=fff&rounded=true&size=150`;\r\n        } else {\r\n          res.data.user.profileImagePath =\r\n            environment.SERVER_URL + res.data.user.profileImagePath;\r\n        }\r\n        this._user = res.data.user;\r\n        this.userSubject.next(this._user);\r\n      } else {\r\n        this.router.navigate([\"/login\"]);\r\n      }\r\n    });\r\n  }\r\n\r\n  private getActiveUsers() {\r\n    return Observable.create((o) => {\r\n      this.apiService.get(\"/user/active-users\").subscribe((res) => {\r\n        if (res.success) o.next(this.processUsers(res.data.users));\r\n        else o.next([]);\r\n      });\r\n    });\r\n  }\r\n  getUserByUserId(id) {\r\n    return this.users.filter((user) => user.userId == id)[0];\r\n  }\r\n\r\n  getAllUsers() {\r\n    this.apiService.get(\"/user/active-users\").subscribe((res) => {\r\n      if (res.success) {\r\n        this.users = this.processUsers(res.data.users);\r\n        this.activeUsers.next(this.users);\r\n      }\r\n    });\r\n  }\r\n\r\n  updateLastMessage(message, activeUserId) {\r\n    let content = message.content;\r\n    for (let index = 0; index < this.users.length; index++) {\r\n      if (\r\n        this.users[index].userId === message.from ||\r\n        this.users[index].userId === message.to\r\n      ) {\r\n        if (\r\n          message.type === MessageType.Image ||\r\n          message.type === MessageType.Video ||\r\n          message.type === MessageType.File\r\n        ) {\r\n          content = message.content.split(\"/\").slice(-1).pop();\r\n        }\r\n        this.users[index].lastMessage = {\r\n          message: content,\r\n          messageType: message.type,\r\n          sendDate: message.timeStamp,\r\n        };\r\n        if (!this.users[index].unreadCount) {\r\n          this.users[index].unreadCount = 0;\r\n        }\r\n        if (!(message.from === activeUserId || message.to === activeUserId))\r\n          this.users[index].unreadCount += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  resetUnreadCount(id) {\r\n    for (let index = 0; index < this.users.length; index++) {\r\n      if (this.users[index].userId === id) {\r\n        this.users[index].unreadCount = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  updateUserProfile(data, image = null) {\r\n    return Observable.create((ob) => {\r\n      const formData: FormData = new FormData();\r\n      if (image) formData.append(\"file\", image, image.name);\r\n      formData.append(\"data\", JSON.stringify(data));\r\n      this.apiService.post(\"/user/update-profile\", formData).subscribe(\r\n        (res) => {\r\n          if (res.success) this.populateUser();\r\n          ob.next(res.success);\r\n        },\r\n        (err) => {\r\n          ob.next(false);\r\n        }\r\n      );\r\n    });\r\n  }\r\n  getUser() {\r\n    return this._user;\r\n  }\r\n\r\n  processUsers(users) {\r\n    users.forEach((user) => this.processUser(user));\r\n    return users;\r\n  }\r\n\r\n  processUser(user) {\r\n    if (\r\n      user.profileImagePath &&\r\n      user.profileImagePath.indexOf(\"https://ui-avatars.com\") === -1\r\n    ) {\r\n      user.profileImagePath = `${environment.SERVER_URL}${user.profileImagePath}`;\r\n    } else\r\n      user.profileImagePath = `https://ui-avatars.com/api/?name=${user.firstName}+${user.lastName}&background=0D8ABC&color=fff&rounded=true&size=150`;\r\n    return user;\r\n  }\r\n}\r\n","\r\n\r\nexport const environment = {\r\n         production: true,\r\n         SERVER_URL: \"https://soho-chat.herokuapp.com\",\r\n         API_PATH: \"/v1\"\r\n       };\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\n\r\n\r\nexport const environment = {\r\n         production: false,\r\n         SERVER_URL: \"https://soho-chat.herokuapp.com\",\r\n         API_PATH: \"/v1\"\r\n       };\r\n\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","/* (ignored) */"]}